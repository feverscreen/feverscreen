{"version":3,"file":"js/app.f71413f0.js","mappings":"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","sources":["webpack://frontend/./src/types.ts","webpack://frontend/./src/App.vue?b193","webpack://frontend/./src/components/UserFacingScreening.vue?04ea","webpack://frontend/./src/utils.ts","webpack://frontend/./src/components/AdminSettings.vue?693a","webpack://frontend/./src/components/CalibrationSettings.vue?966c","webpack://frontend/./src/components/VideoStream.vue?1dde","webpack://frontend/./src/components/VideoCropControls.vue?db87","webpack://frontend/./src/components/VideoCropControls.vue","webpack://frontend/./src/components/VideoCropControls.vue?f46c","webpack://frontend/./src/components/VideoCropControls.vue?ea43","webpack://frontend/./src/components/VideoStream.vue","webpack://frontend/./src/components/VideoStream.vue?8bbf","webpack://frontend/./src/components/VideoStream.vue?f337","webpack://frontend/./src/api/api.ts","webpack://frontend/./src/components/CalibrationSettings.vue","webpack://frontend/./src/components/CalibrationSettings.vue?368a","webpack://frontend/./src/components/CalibrationSettings.vue?db4f","webpack://frontend/./src/components/DeviceInfo.vue?1459","webpack://frontend/./src/components/DeviceInfo.vue","webpack://frontend/./src/components/DeviceInfo.vue?a93c","webpack://frontend/./src/components/DeviceInfo.vue?b22e","webpack://frontend/./src/components/DeveloperUtilities.vue?5684","webpack://frontend/./src/components/DeveloperUtilities.vue","webpack://frontend/./src/components/DeveloperUtilities.vue?0f1b","webpack://frontend/./src/components/DeveloperUtilities.vue?5497","webpack://frontend/./src/components/AdminSettings.vue","webpack://frontend/./src/components/AdminSettings.vue?6a19","webpack://frontend/./src/components/AdminSettings.vue?d81e","webpack://frontend/./src/components/UserFacingScreening.vue","webpack://frontend/./src/components/UserFacingScreening.vue?063e","webpack://frontend/./src/components/UserFacingScreening.vue?120d","webpack://frontend/./src/components/LoggingInterface.vue?8ad5","webpack://frontend/./src/components/LoggingInterface.vue","webpack://frontend/./src/components/LoggingInterface.vue?5e08","webpack://frontend/./src/components/LoggingInterface.vue?82cc","webpack://frontend/./src/camera.ts","webpack://frontend/./src/components/QRImage.vue?899d","webpack://frontend/./src/components/QRImage.vue","webpack://frontend/./src/components/QRImage.vue?2338","webpack://frontend/./src/components/QRImage.vue?187a","webpack://frontend/./src/components/QRCameraFeed.vue?a335","webpack://frontend/./src/components/QRCameraFeed.vue","webpack://frontend/./src/components/QRCameraFeed.vue?d988","webpack://frontend/./src/components/QRCameraFeed.vue?484c","webpack://frontend/./src/frame-handler.ts","webpack://frontend/./src/App.vue","webpack://frontend/./src/App.vue?275f","webpack://frontend/./src/App.vue?130d","webpack://frontend/./src/plugins/vuetify.ts","webpack://frontend/./src/main.ts","webpack://frontend/webpack/bootstrap","webpack://frontend/webpack/runtime/chunk loaded","webpack://frontend/webpack/runtime/compat get default export","webpack://frontend/webpack/runtime/define property getters","webpack://frontend/webpack/runtime/ensure chunk","webpack://frontend/webpack/runtime/get javascript chunk filename","webpack://frontend/webpack/runtime/get mini-css chunk filename","webpack://frontend/webpack/runtime/global","webpack://frontend/webpack/runtime/hasOwnProperty shorthand","webpack://frontend/webpack/runtime/load script","webpack://frontend/webpack/runtime/make namespace object","webpack://frontend/webpack/runtime/publicPath","webpack://frontend/webpack/runtime/jsonp chunk loading","webpack://frontend/webpack/runtime/wasm chunk loading","webpack://frontend/webpack/startup"],"sourcesContent":["import { CameraConnectionState, Frame } from \"./camera\";\nimport { DegreesCelsius } from \"@/utils\";\nimport { Point } from \"@/geom\";\nimport { AnalysisResult as ProcessResult } from \"../processing/tko_processing\";\n\nexport const enum QrState {\n  Valid,\n  Invalid,\n  Unregistered\n};\n\nexport const DEFAULT_THRESHOLD_MIN_FEVER = 37.5;\nexport const FactoryDefaultCalibration: CalibrationInfo = {\n  ThermalRefTemp: 37.87441329956055,\n  SnapshotTime: 0,\n  TemperatureCelsius: 37.5,\n  SnapshotValue: 30197.9765625,\n  ThresholdMinFever: DEFAULT_THRESHOLD_MIN_FEVER,\n  HeadBLX: 0,\n  HeadBLY: 0,\n  HeadBRX: 0,\n  HeadBRY: 0,\n  HeadTLX: 0,\n  HeadTLY: 0,\n  HeadTRX: 0,\n  HeadTRY: 0,\n  CalibrationBinaryVersion: \"abcde\", // Fill these out.\n  UuidOfUpdater: 432423432432, // Fill these out.\n  UseNormalSound: true,\n  UseWarningSound: true,\n  UseErrorSound: true\n};\n\nexport interface CalibrationInfo {\n  ThermalRefTemp: number;\n  SnapshotTime: number;\n  TemperatureCelsius: number;\n  SnapshotValue: number;\n  ThresholdMinFever: number;\n  HeadTLX: number;\n  HeadTLY: number;\n  HeadBLX: number;\n  HeadBLY: number;\n  HeadTRX: number;\n  HeadTRY: number;\n  HeadBRX: number;\n  HeadBRY: number;\n  CalibrationBinaryVersion: string;\n  UuidOfUpdater: number;\n  UseNormalSound: boolean;\n  UseWarningSound: boolean;\n  UseErrorSound: boolean;\n}\n\nexport type BoxOffset = \"left\" | \"right\" | \"top\" | \"bottom\";\nexport interface CropBox {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\nexport interface BoundingBox {\n  x0: number;\n  x1: number;\n  y0: number;\n  y1: number;\n}\n\nexport enum ScreeningState {\n  INIT = \"INIT\",\n  WARMING_UP = \"WARMING_UP\",\n  READY = \"READY\", // no face\n  HEAD_LOCK = \"HEAD_LOCK\",\n  TOO_FAR = \"TOO_FAR\",\n  LARGE_BODY = \"LARGE_BODY\",\n  MULTIPLE_HEADS = \"MULTIPLE_HEADS\",\n  FACE_LOCK = \"FACE_LOCK\", // has face\n  FRONTAL_LOCK = \"FRONTAL_LOCK\", // Face is front-on\n  STABLE_LOCK = \"STABLE_LOCK\", // Face has not changed in size or position for a couple of frames.\n  MEASURED = \"MEASURED\", // has face, but not front-on\n  MISSING_THERMAL_REF = \"MISSING_REF\",\n  BLURRED = \"BLURRED\",\n  AFTER_FFC_EVENT = \"AFTER_FFC_EVENT\"\n}\n\nexport interface CalibrationConfig {\n  timestamp: Date;\n  thermalReferenceRawValue: number;\n  hotspotRawTemperatureValue: number;\n  calibrationTemperature: DegreesCelsius;\n  thermalRefTemperature: DegreesCelsius;\n  thresholdMinFever: number;\n  playNormalSound: boolean;\n  playErrorSound: boolean;\n  playWarningSound: boolean;\n  head: { tL: Point; tR: Point; bL: Point; bR: Point };\n}\n\nexport interface Circle {\n  center: Point;\n  radius: number;\n}\n\nexport interface ThermalReference {\n  geom: Circle;\n  val: number;\n  temp: number;\n}\n\nexport interface ScreeningEvent {\n  timestamp: Date;\n  rawTemperatureValue: number;\n  calculatedValue: number;\n  sampleX: number;\n  sampleY: number;\n  frame: Frame;\n  thermalReference: ThermalReference;\n  face: FaceInfo;\n}\n\nexport interface FaceInfo {\n  halfwayRatio: number;\n  headLock: number;\n  isValid: boolean;\n  samplePoint: Point;\n  sampleValue: number;\n  sampleTemp: number;\n  head: {\n    topLeft: Point;\n    topRight: Point;\n    bottomLeft: Point;\n    bottomRight: Point;\n  };\n}\n\nexport interface AnalysisResult {\n  motionSum: number;\n  motionThresholdSum: number;\n  thresholdSum: number;\n  frameBottomSum: number;\n  heatStats: {\n    min: number;\n    max: number;\n    threshold: number;\n  };\n  face: FaceInfo;\n  nextState: ScreeningState;\n  hasBody: boolean;\n  thermalRef: ThermalReference;\n}\n\nexport const InitialFrameInfo = {\n  Camera: {\n    ResX: 160,\n    ResY: 120,\n    FPS: 9,\n    Brand: \"flir\",\n    Model: \"lepton3.5\",\n    Firmware: \"3.3.26\",\n    CameraSerial: 12345\n  },\n  Telemetry: {\n    FrameCount: 1,\n    TimeOn: 1,\n    FFCState: \"On\",\n    FrameMean: 0,\n    TempC: 0,\n    LastFFCTempC: 0,\n    LastFFCTime: 0\n  },\n  AppVersion: \"\",\n  BinaryVersion: \"\",\n  Calibration: FactoryDefaultCalibration\n};\n\nexport interface AppState {\n  currentFrame: Frame | null;\n  cameraConnectionState: CameraConnectionState;\n  face: FaceInfo | null;\n  currentCalibration: CalibrationConfig;\n  currentScreeningEvent: ScreeningEvent | null;\n  currentScreeningState: ScreeningState;\n  currentScreeningStateFrameCount: number;\n  paused: boolean;\n  lastFrameTime: number;\n  uuid: number;\n  analysisResult: AnalysisResult;\n}\n\nfunction getScreeningState(state: number): ScreeningState {\n  let screeningState = ScreeningState.INIT;\n  switch (state) {\n    case 0:\n      screeningState = ScreeningState.WARMING_UP;\n      break;\n    case 1:\n      screeningState = ScreeningState.READY;\n      break;\n    case 2:\n      screeningState = ScreeningState.HEAD_LOCK;\n      break;\n    case 3:\n      screeningState = ScreeningState.TOO_FAR;\n      break;\n    case 4:\n      screeningState = ScreeningState.LARGE_BODY;\n      break;\n    case 5:\n      screeningState = ScreeningState.FACE_LOCK;\n      break;\n    case 6:\n      screeningState = ScreeningState.FRONTAL_LOCK;\n      break;\n    case 7:\n      screeningState = ScreeningState.STABLE_LOCK;\n      break;\n    case 8:\n      screeningState = ScreeningState.MEASURED;\n      break;\n    case 9:\n      screeningState = ScreeningState.MISSING_THERMAL_REF;\n      break;\n    case 10:\n      screeningState = ScreeningState.BLURRED;\n      break;\n    case 11:\n      screeningState = ScreeningState.AFTER_FFC_EVENT;\n      break;\n  }\n  return screeningState;\n}\n\nexport function extractResult(analysisResult: ProcessResult) {\n  const f = analysisResult.face;\n  const h = f.head;\n  const tL = h.topLeft;\n  const tR = h.topRight;\n  const bL = h.bottomLeft;\n  const bR = h.bottomRight;\n  const sP = f.samplePoint;\n  const hS = analysisResult.heatStats;\n  const ref = analysisResult.thermalReference;\n  const geom = analysisResult.thermalReference.geom;\n  const cP = geom.center;\n\n  const copiedAnalysisResult: AnalysisResult = {\n    face: {\n      headLock: f.headLock,\n      head: {\n        topLeft: {\n          x: tL.x,\n          y: tL.y\n        },\n        topRight: {\n          x: tR.x,\n          y: tR.y\n        },\n        bottomLeft: {\n          x: bL.x,\n          y: bL.y\n        },\n        bottomRight: {\n          x: bR.x,\n          y: bR.y\n        }\n      },\n      samplePoint: {\n        x: sP.x,\n        y: sP.y\n      },\n      sampleTemp: f.sampleTemp,\n      sampleValue: f.sampleValue,\n      halfwayRatio: f.halfwayRatio,\n      isValid: f.isValid\n    },\n    frameBottomSum: analysisResult.frameBottomSum,\n    motionSum: analysisResult.motionSum,\n    heatStats: {\n      threshold: hS.threshold,\n      min: hS.min,\n      max: hS.max\n    },\n    motionThresholdSum: analysisResult.motionThresholdSum,\n    thresholdSum: analysisResult.thresholdSum,\n    nextState: getScreeningState(analysisResult.nextState),\n    hasBody: analysisResult.hasBody,\n    thermalRef: {\n      geom: {\n        center: {\n          x: cP.x,\n          y: cP.y\n        },\n        radius: geom.radius\n      },\n      val: ref.val,\n      temp: ref.temp\n    }\n  };\n\n  f.free();\n  h.free();\n  tL.free();\n  tR.free();\n  bL.free();\n  bR.free();\n  sP.free();\n  hS.free();\n  cP.free();\n  geom.free();\n  ref.free();\n  analysisResult.free();\n  return copiedAnalysisResult;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"app\"},on:{\"skip-warmup\":_vm.skipWarmup}},[_c('UserFacingScreening',{attrs:{\"on-reference-device\":_vm.isReferenceDevice,\"state\":_vm.appState.currentScreeningState,\"screening-event\":_vm.appState.currentScreeningEvent,\"calibration\":_vm.appState.currentCalibration,\"face\":_vm.face,\"warmup-seconds-remaining\":_vm.remainingWarmupTime,\"shapes\":[_vm.prevShape, _vm.nextShape],\"isTesting\":!_vm.useLiveCamera,\"thermal-ref-side\":_vm.thermalRefSide,\"showCanvas\":!_vm.qrMode || !_vm.finishScan || (_vm.finishScan && _vm.registered)}}),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.showSoftwareVersionUpdatedPrompt),callback:function ($$v) {_vm.showSoftwareVersionUpdatedPrompt=$$v},expression:\"showSoftwareVersionUpdatedPrompt\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" This software has been updated. \"+_vm._s(_vm.appVersion)+\" \")]),_c('v-card-actions',{attrs:{\"center\":\"\"}},[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function (e) { return (_vm.showSoftwareVersionUpdatedPrompt = false); }}},[_vm._v(\" Proceed \")])],1)],1)],1),_c('v-overlay',{attrs:{\"absolute\":\"\",\"width\":\"500\"},model:{value:(_vm.isNotGettingFrames),callback:function ($$v) {_vm.isNotGettingFrames=$$v},expression:\"isNotGettingFrames\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Waiting for camera input...\")])],1)],1),_c('v-snackbar',{model:{value:(_vm.showUpdatedCalibrationSnackbar),callback:function ($$v) {_vm.showUpdatedCalibrationSnackbar=$$v},expression:\"showUpdatedCalibrationSnackbar\"}},[_vm._v(\" Calibration was updated \")]),_c('QRVideo',{attrs:{\"startScanning\":_vm.qrMode && _vm.finishScan && !_vm.registered,\"setQRCode\":_vm.setQRCode}}),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.qrMode && _vm.finishScan)?_c('QRImage',{attrs:{\"qrState\":_vm.qrState}}):_vm._e()],1),(!_vm.isReferenceDevice)?_c('div',{staticClass:\"debug-video\"},[(_vm.appState.currentFrame)?_c('VideoStream',{attrs:{\"frame\":_vm.appState.currentFrame.frame,\"face\":_vm.face,\"min\":_vm.appState.currentFrame.analysisResult.heatStats.min,\"max\":_vm.appState.currentFrame.analysisResult.heatStats.max,\"crop-box\":_vm.appState.currentCalibration.cropBox,\"crop-enabled\":true,\"draw-overlays\":true,\"show-coords\":true}}):_vm._e(),_c('div',{staticClass:\"pa-6\"},[_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"light-blue\"},on:{\"click\":function () {\n            _vm.paused = !_vm.paused;\n          }}},[_vm._v(\" \"+_vm._s(_vm.paused ? \"Play\" : \"Pause\")+\" \")]),_c('v-row',[_c('p',[_vm._v(_vm._s(_vm.minFrame))]),_c('v-range-slider',{model:{value:(_vm.rangeFrames),callback:function ($$v) {_vm.rangeFrames=$$v},expression:\"rangeFrames\"}}),_c('p',[_vm._v(_vm._s(_vm.maxFrame))])],1),_c('LoggingInterface',{attrs:{\"framePos\":_vm.framePos,\"frameLogs\":_vm.frameLogs}})],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-state\",class:[\n    _vm.classNameForState,\n    _vm.screeningResultClass,\n    { 'mini-view': !_vm.onReferenceDevice } ],style:({ background: _vm.warmupBackgroundColour }),attrs:{\"id\":\"user-facing-screening\"},on:{\"click\":function($event){_vm.interacted = true}}},[_c('canvas',{ref:\"beziers\",attrs:{\"hidden\":!_vm.showCanvas || _vm.isWarmingUp,\"id\":\"beziers\",\"width\":\"710\",\"height\":\"1080\"}}),_c('div',{staticClass:\"center\",class:{ 'warming-up': _vm.isWarmingUp }},[(_vm.hasScreeningResult)?_c('div',{class:['result', { 'should-leave-frame': _vm.shouldLeaveFrame }]},[_vm._v(\" \"+_vm._s(_vm.temperature)+\" \"),_c('br'),(_vm.shouldLeaveFrame)?_c('span',[_vm._v(_vm._s(_vm.screeningAdvice))]):_vm._e(),_c('br')]):_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.messageText)}})]),(_vm.onReferenceDevice || _vm.isLocal)?_c('v-card',{staticClass:\"settings-toggle-button\",class:{ interacted: _vm.interacted },attrs:{\"dark\":\"\",\"flat\":\"\",\"height\":\"44\",\"tile\":\"\",\"color\":\"transparent\"}},[_c('v-card-actions',[_c('v-btn',{attrs:{\"absolute\":\"\",\"dark\":\"\",\"fab\":\"\",\"bottom\":\"\",\"right\":\"\",\"elevation\":\"0\",\"color\":\"transparent\"},on:{\"click\":function (e) {\n            if (_vm.interacted) {\n              _vm.showSettings = true;\n              _vm.hasSettings = true;\n            }\n          }}},[_c('v-icon',{attrs:{\"color\":\"rgba(255, 255, 255, 0.5)\",\"large\":\"\"}},[_vm._v(_vm._s(_vm.cogIcon))])],1)],1)],1):_vm._e(),_c('v-dialog',{attrs:{\"hide-overlay\":\"\",\"attach\":\"#user-facing-screening\",\"fullscreen\":\"\",\"transition\":\"dialog-bottom-transition\"},model:{value:(_vm.showSettings),callback:function ($$v) {_vm.showSettings=$$v},expression:\"showSettings\"}},[(_vm.hasSettings)?_c('AdminSettings',{on:{\"closed\":_vm.closedAdminSettings}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const BlobReader = (function(): {\n  arrayBuffer: (blob: Blob) => Promise<ArrayBuffer>;\n} {\n  // For comparability with older browsers/iOS that don't yet support arrayBuffer()\n  // directly off the blob object\n  const arrayBuffer: (blob: Blob) => Promise<ArrayBuffer> =\n    \"arrayBuffer\" in Blob.prototype &&\n    typeof (Blob.prototype as Blob)[\"arrayBuffer\"] === \"function\"\n      ? (blob: Blob) => blob[\"arrayBuffer\"]()\n      : (blob: Blob) =>\n          new Promise((resolve, reject) => {\n            const fileReader = new FileReader();\n            fileReader.addEventListener(\"load\", () => {\n              resolve(fileReader.result as ArrayBuffer);\n            });\n            fileReader.addEventListener(\"error\", () => {\n              reject();\n            });\n            fileReader.readAsArrayBuffer(blob);\n          });\n\n  return {\n    arrayBuffer\n  };\n})();\n\nexport class DegreesCelsius {\n  public val: number;\n  constructor(val: number) {\n    this.val = val;\n  }\n  public toString(): string {\n    if (this.val === undefined) {\n      debugger;\n    }\n    return `${this.val.toFixed(1)}`;\n  }\n}\n\nexport const temperatureForSensorValue = (\n  savedThermalRefValue: number,\n  rawValue: number,\n  currentThermalRefValue: number\n): DegreesCelsius => {\n  return new DegreesCelsius(\n    savedThermalRefValue + (rawValue - currentThermalRefValue) * 0.01\n  );\n};\n\nexport function saveCurrentVersion(binaryVersion: string, appVersion: string) {\n  window.localStorage.setItem(\n    \"softwareVersion\",\n    JSON.stringify({\n      appVersion,\n      binaryVersion\n    })\n  );\n}\n\nexport function checkForSoftwareUpdates(\n  binaryVersion: string,\n  appVersion: string,\n  shouldReloadIfChanged = true\n): boolean {\n  const prevVersionJSON = window.localStorage.getItem(\"softwareVersion\");\n  if (prevVersionJSON) {\n    try {\n      const prevVersion = JSON.parse(prevVersionJSON);\n      if (\n        binaryVersion &&\n        appVersion &&\n        (prevVersion.binaryVersion != binaryVersion ||\n          prevVersion.appVersion != appVersion)\n      ) {\n        if (shouldReloadIfChanged) {\n          console.log(\n            \"reload because version changed\",\n            JSON.stringify(prevVersion),\n            binaryVersion,\n            appVersion\n          );\n          window.location.reload();\n        } else {\n          saveCurrentVersion(binaryVersion, appVersion);\n          // Display info that the software has updated since last started up.\n          return true;\n        }\n      }\n    } catch (e) {\n      saveCurrentVersion(binaryVersion, appVersion);\n      return false;\n    }\n  } else {\n    saveCurrentVersion(binaryVersion, appVersion);\n  }\n  return false;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"light-blue\",\"dark\":\"\"},scopedSlots:_vm._u([{key:\"extension\",fn:function(){return [_c('v-tabs',{attrs:{\"centered\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.tabItems),function(item){return _c('v-tab',{key:item.tab},[_vm._v(_vm._s(item.tab))])}),1)]},proxy:true}])},[_c('v-toolbar-title',[_vm._v(\"Settings\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\" close \")])],1),_c('v-tabs-items',{attrs:{\"touchless\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.tabItems),function(item){return _c('v-tab-item',{key:item.tab},[_c(item.content,{tag:\"component\"})],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"height\":\"calc(100vh - 112px)\"}},[_c('v-container',{staticClass:\"cont\"},[_c('v-card',{staticClass:\"split\",attrs:{\"flat\":\"\"}},[_c('v-card',[(_vm.state.currentFrame)?_c('VideoStream',{attrs:{\"frame\":_vm.state.currentFrame.frame,\"face\":_vm.state.face,\"crop-box\":_vm.editedCropBox,\"thermal-ref\":_vm.state.currentFrame.analysisResult.thermalRef.geom,\"min\":_vm.state.currentFrame.analysisResult.heatStats.min,\"max\":_vm.state.currentFrame.analysisResult.heatStats.max,\"crop-enabled\":false}}):_vm._e()],1),_c('v-card',{staticClass:\"settings\",attrs:{\"width\":\"700\"}},[_c('v-card-title',[_vm._v(\" Calibration: \"+_vm._s(_vm.pendingCalibration)+\" \"),_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":!_vm.canCalibrate},on:{\"click\":function($event){$event.stopPropagation();return (function () { return _vm.editCalibration(); })($event)}}},[_c('v-icon',{attrs:{\"color\":\"#999\",\"small\":\"\"}},[_vm._v(_vm._s(_vm.pencilIcon))]),_vm._v(\" Edit \")],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"400\"},model:{value:(_vm.showCalibrationDialog),callback:function ($$v) {_vm.showCalibrationDialog=$$v},expression:\"showCalibrationDialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Edit calibration\")]),_c('v-container',[(_vm.snapshotScreeningEvent)?_c('VideoStream',{attrs:{\"frame\":_vm.snapshotScreeningEvent.frame.frame,\"face\":_vm.snapshotScreeningEvent.face,\"min\":_vm.state.currentFrame.analysisResult.heatStats.min,\"max\":_vm.state.currentFrame.analysisResult.heatStats.max,\"crop-box\":_vm.state.currentCalibration.cropBox,\"crop-enabled\":false,\"draw-overlays\":true,\"scale\":0.6}}):_vm._e()],1),_c('v-card-subtitle',[_vm._v(\" Take your temperature and enter it here to calibrate the system against the current screening event. \")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"calibrated temperature\",\"value\":_vm.editedCalibration},on:{\"blur\":_vm.updateCalibration}}),_c('v-card-actions',[_c('v-btn',{on:{\"click\":function () { return _vm.incrementCalibration(0.1); }}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(_vm._s(_vm.plusIcon))])],1),_c('v-spacer'),_c('v-btn',{on:{\"click\":function () { return _vm.incrementCalibration(-0.1); }}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(_vm._s(_vm.minusIcon))])],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"grey darken-1\"},on:{\"click\":function($event){_vm.showCalibrationDialog = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"green darken-1\"},on:{\"click\":function (e) { return _vm.acceptCalibration(); }}},[_vm._v(\" Accept \")])],1)],1)],1),_c('v-card-text',[_c('v-checkbox',{attrs:{\"label\":\"Use custom alert threshold\"},on:{\"change\":_vm.toggleCustomTemperatureThresholds},model:{value:(_vm.useCustomTemperatureRange),callback:function ($$v) {_vm.useCustomTemperatureRange=$$v},expression:\"useCustomTemperatureRange\"}}),_c('v-card-text',[_c('v-slider',{attrs:{\"disabled\":!_vm.useCustomTemperatureRange,\"min\":\"30\",\"max\":\"40\",\"step\":\"0.1\",\"thumb-label\":\"\",\"ticks\":true,\"color\":'green',\"track-color\":'rgba(255, 0, 0, 0.25)'},on:{\"change\":function (e) { return _vm.persistSettings(); }},model:{value:(_vm.editedTemperatureThreshold),callback:function ($$v) {_vm.editedTemperatureThreshold=$$v},expression:\"editedTemperatureThreshold\"}}),_c('span',{staticClass:\"selected-temp-range\",domProps:{\"innerHTML\":_vm._s(_vm.selectedTemperatureRange)}})],1)],1),_c('v-card-title',[_vm._v(\"Sounds:\")]),_c('v-container',{attrs:{\"fluid\":\"\",\"width\":\"100%\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-switch',{attrs:{\"label\":\"Play normal sound\"},on:{\"change\":function (e) { return _vm.persistSettings(); }},model:{value:(_vm.playNormalSound),callback:function ($$v) {_vm.playNormalSound=$$v},expression:\"playNormalSound\"}})],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-switch',{attrs:{\"label\":\"Play warning sound\"},on:{\"change\":function (e) { return _vm.persistSettings(); }},model:{value:(_vm.playWarningSound),callback:function ($$v) {_vm.playWarningSound=$$v},expression:\"playWarningSound\"}})],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-switch',{attrs:{\"label\":\"Play error sound\"},on:{\"change\":function (e) { return _vm.persistSettings(); }},model:{value:(_vm.playErrorSound),callback:function ($$v) {_vm.playErrorSound=$$v},expression:\"playErrorSound\"}})],1)],1)],1)],1)],1),_c('v-overlay',{attrs:{\"value\":_vm.saving,\"light\":\"\"}},[_vm._v(\" Saving settings \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",class:{ recording: _vm.recording },attrs:{\"id\":\"video-stream-container\"}},[_c('canvas',{ref:\"cameraStream\",attrs:{\"id\":\"camera-stream\",\"width\":\"160\",\"height\":\"120\"}}),_c('canvas',{ref:\"vizOverlay\",attrs:{\"id\":\"debug-overlay\",\"width\":\"480\",\"height\":\"540\"}}),(_vm.canEditCropping && _vm.cropEnabled)?_c('video-crop-controls',{attrs:{\"crop-box\":_vm.cropBox},on:{\"crop-changed\":_vm.gotCropChange}}):_vm._e(),(_vm.cropEnabled)?_c('v-btn',{class:{ on: _vm.canEditCropping },attrs:{\"text\":\"\",\"title\":\"Edit cropping\",\"id\":\"toggle-cropping\",\"dark\":\"\"},on:{\"click\":_vm.toggleCropping}},[_c('v-icon',[_vm._v(_vm._s(_vm.cropIcon))])],1):_vm._e(),(_vm.showCoords)?_c('p',{staticClass:\"coords\"},[_vm._v(\"(\"+_vm._s(_vm.coords.x)+\", \"+_vm._s(_vm.coords.y)+\")\")]):_vm._e(),_c('p',[_vm._v(_vm._s(_vm.frameNum))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"box\",attrs:{\"id\":\"fov-box\"}},[_c('div',[_c('div',{ref:\"top\",staticClass:\"fov-handle\",attrs:{\"id\":\"top-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 256 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z\"}})])]),_c('div',{ref:\"left\",staticClass:\"fov-handle\",attrs:{\"id\":\"left-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 512 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z\"}})])]),_c('div',{ref:\"right\",staticClass:\"fov-handle\",attrs:{\"id\":\"right-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 512 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z\"}})])]),_c('div',{ref:\"bottom\",staticClass:\"fov-handle\",attrs:{\"id\":\"bottom-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 256 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z\"}})])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { BoundingBox, BoxOffset, CropBox } from \"@/types\";\n\n@Component\nexport default class VideoCropControls extends Vue {\n  @Prop({ required: true }) cropBox!: CropBox;\n\n  private currentTarget: HTMLDivElement | null = null;\n  private boundDragHandle: ((e: MouseEvent | TouchEvent) => void) | null = null;\n  private boundEndDrag: ((e: Event) => void) | null = null;\n\n  $refs!: {\n    top: HTMLDivElement;\n    right: HTMLDivElement;\n    bottom: HTMLDivElement;\n    left: HTMLDivElement;\n    box: HTMLDivElement;\n  };\n\n  created() {\n    this.boundEndDrag = this.endDrag.bind(this);\n    window.addEventListener(\"mouseup\", this.boundEndDrag);\n    window.addEventListener(\"touchend\", this.boundEndDrag);\n  }\n\n  mounted() {\n    const { top, left, right, bottom } = this.cropBox;\n    // Set the initial handle positions:\n    this.$refs.top.style.top = `${top}%`;\n    this.$refs.right.style.right = `${right}%`;\n    this.$refs.bottom.style.bottom = `${bottom}%`;\n    this.$refs.left.style.left = `${left}%`;\n    let offset = top + (100 - (bottom + top)) * 0.5;\n    this.$refs.left.style.top = `${offset}%`;\n    this.$refs.right.style.top = `${offset}%`;\n    offset = left + (100 - (left + right)) * 0.5;\n    this.$refs.top.style.left = `${offset}%`;\n    this.$refs.bottom.style.left = `${offset}%`;\n  }\n\n  beforeDestroy() {\n    if (this.boundEndDrag) {\n      window.removeEventListener(\"mouseup\", this.boundEndDrag);\n      window.removeEventListener(\"touchend\", this.boundEndDrag);\n    }\n  }\n\n  startDrag(event: Event) {\n    if (this.boundDragHandle === null) {\n      this.boundDragHandle = this.dragHandle.bind(this);\n    }\n    const eventName = event.type === \"mousedown\" ? \"mousemove\" : \"touchmove\";\n    this.currentTarget = event.target as HTMLDivElement;\n    if (this.boundDragHandle) {\n      window.addEventListener(eventName, this.boundDragHandle);\n    }\n  }\n\n  endDrag(event: Event) {\n    const eventName = event.type === \"mouseup\" ? \"mousemove\" : \"touchmove\";\n    this.currentTarget = null;\n    if (this.boundDragHandle) {\n      window.removeEventListener(eventName, this.boundDragHandle);\n    }\n  }\n\n  dragHandle(event: MouseEvent | TouchEvent) {\n    const cropBox = this.cropBox;\n    const cropTopHandle = this.$refs.top;\n    const cropRightHandle = this.$refs.right;\n    const cropBottomHandle = this.$refs.bottom;\n    const cropLeftHandle = this.$refs.left;\n    let position: { clientX: number; clientY: number };\n    if (!(event instanceof MouseEvent)) {\n      position = (event as TouchEvent).touches[0];\n    } else {\n      position = event;\n    }\n    const { clientX: x, clientY: y } = position;\n    const minDimensions = 20;\n    let maxInsetPercentage = 35;\n    const bounds = this.$refs.box.getBoundingClientRect();\n    let offset;\n    if (this.currentTarget) {\n      const l: BoxOffset = \"left\";\n      const r: BoxOffset = \"right\";\n      switch (this.currentTarget.id) {\n        case \"top-handle\":\n          maxInsetPercentage = 100 - (cropBox.bottom + minDimensions);\n          cropBox.top = Math.min(\n            maxInsetPercentage,\n            Math.max(0, 100 * ((y - bounds.top) / bounds.height))\n          );\n          cropTopHandle.style.top = `${cropBox.top}%`;\n          offset = cropBox.top + (100 - (cropBox.bottom + cropBox.top)) * 0.5;\n          cropLeftHandle.style.top = `${offset}%`;\n          cropRightHandle.style.top = `${offset}%`;\n          break;\n        case \"right-handle\":\n          maxInsetPercentage = 100 - (cropBox[l] + minDimensions);\n          cropBox[r] = Math.min(\n            maxInsetPercentage,\n            Math.max(0, 100 * ((bounds.right - x) / bounds.width))\n          );\n          cropRightHandle.style.right = `${cropBox[r]}%`;\n          offset = cropBox[l] + (100 - (cropBox[l] + cropBox[r])) * 0.5;\n          cropTopHandle.style.left = `${offset}%`;\n          cropBottomHandle.style.left = `${offset}%`;\n          break;\n        case \"bottom-handle\":\n          maxInsetPercentage = 100 - (cropBox.top + minDimensions);\n          cropBox.bottom = Math.min(\n            maxInsetPercentage,\n            Math.max(0, 100 * ((bounds.bottom - y) / bounds.height))\n          );\n          cropBottomHandle.style.bottom = `${cropBox.bottom}%`;\n          offset = cropBox.top + (100 - (cropBox.bottom + cropBox.top)) * 0.5;\n          cropLeftHandle.style.top = `${offset}%`;\n          cropRightHandle.style.top = `${offset}%`;\n          break;\n        case \"left-handle\":\n          maxInsetPercentage = 100 - (cropBox[r] + minDimensions);\n          cropBox[l] = Math.min(\n            maxInsetPercentage,\n            Math.max(0, 100 * ((x - bounds.left) / bounds.width))\n          );\n          cropLeftHandle.style.left = `${cropBox[l]}%`;\n          offset = cropBox[l] + (100 - (cropBox[l] + cropBox[r])) * 0.5;\n          cropTopHandle.style.left = `${offset}%`;\n          cropBottomHandle.style.left = `${offset}%`;\n          break;\n      }\n      // Update saved fovBox:\n      this.$emit(\"crop-changed\", cropBox);\n      this.$parent.$emit(\"crop-changed\", cropBox);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoCropControls.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoCropControls.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VideoCropControls.vue?vue&type=template&id=60b9dd6c&scoped=true&\"\nimport script from \"./VideoCropControls.vue?vue&type=script&lang=ts&\"\nexport * from \"./VideoCropControls.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VideoCropControls.vue?vue&type=style&index=0&id=60b9dd6c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60b9dd6c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Emit, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { getNumFrames } from \"../../cptv_player/cptv_player\"\nimport VideoCropControls from \"@/components/VideoCropControls.vue\";\nimport { BoundingBox, CropBox, FaceInfo } from \"@/types\";\nimport { mdiCrop } from \"@mdi/js\";\nimport { Circle } from \"@/geom\";\n\n@Component({ components: { VideoCropControls } })\nexport default class VideoStream extends Vue {\n  @Prop() public frame!: Uint16Array;\n  @Prop({ required: true }) public min!: number;\n  @Prop({ required: true }) public max!: number;\n  @Prop({ required: true }) public face!: FaceInfo | null;\n  @Prop({ required: true }) public cropBox!: CropBox;\n  @Prop({ required: true }) public cropEnabled!: boolean;\n  @Prop({ default: 1.0 }) public scale!: number;\n  @Prop({ required: false }) public thermalRef!: Circle | null;\n  @Prop({ default: true }) public drawOverlays!: boolean;\n  @Prop({ default: false }) public recording!: boolean;\n  @Prop({ default: false }) public showCoords!: boolean;\n  private canEditCropping = false;\n\n  $refs!: {\n    cameraStream: HTMLCanvasElement;\n    vizOverlay: HTMLCanvasElement;\n    container: HTMLDivElement;\n  };\n\n  get cropIcon() {\n    return mdiCrop;\n  }\n\n  private coords: { x: number; y: number } = { x: 0, y: 0 };\n  private frameNum = 0;\n\n  mounted() {\n    const container = this.$refs.container;\n    container.style.width = `${375 * this.scale}px`;\n    container.style.height = `${500 * this.scale}px`;\n\n    if (this.showCoords) {\n      container.addEventListener(\"mousemove\", this.onMouseMove);\n    }\n\n    if (this.frame) {\n      this.onFrameUpdate(this.frame);\n      this.updateOverlayCanvas();\n    }\n  }\n\n  onMouseMove(e: MouseEvent) {\n    const rect = (e.target as HTMLElement).getBoundingClientRect();\n    const x = Math.floor(\n      Math.min(((e.clientX - rect.x) / rect.width) * 120, 119)\n    );\n    const y = Math.floor(\n      Math.min(((e.clientY - rect.y) / rect.height) * 160, 159)\n    );\n    this.coords = { x, y };\n  }\n\n  beforeDestroy() {\n    if (this.showCoords) {\n      this.$refs.container.removeEventListener(\"mousemove\", this.onMouseMove);\n    }\n  }\n\n  updateOverlayCanvas() {\n    const underlay = this.$refs.cameraStream;\n    const canvas = this.$refs.vizOverlay;\n    const canvasWidth = canvas.width * window.devicePixelRatio;\n    const canvasHeight = canvas.height * window.devicePixelRatio;\n    const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    context.clearRect(0, 0, canvasWidth, canvasHeight);\n    if (this.thermalRef) {\n      context.save();\n      const scaleX = canvasWidth / (underlay.height * window.devicePixelRatio);\n      const scaleY = canvasHeight / (underlay.width * window.devicePixelRatio);\n      context.scale(scaleX, scaleY);\n      context.fillStyle = \"rgba(255, 0, 0, 0.4)\";\n      context.beginPath();\n      context.arc(\n        this.thermalRef.center.x,\n        this.thermalRef.center.y,\n        this.thermalRef.radius,\n        0,\n        Math.PI * 2\n      );\n      context.fill();\n      context.restore();\n    }\n    if (this.drawOverlays) {\n      context.save();\n      const scaleX = canvasWidth / (underlay.height * window.devicePixelRatio);\n      const scaleY = canvasHeight / (underlay.width * window.devicePixelRatio);\n      context.scale(scaleX, scaleY);\n      const face = this.face;\n      if (face) {\n        // Now find the hotspot - only if we have a good lock!\n        context.lineWidth = 0.25;\n        if (face.isValid) {\n          let valid: boolean = face.isValid;\n          if (face.headLock >= 1.0) {\n            context.strokeStyle = \"red\";\n            context.lineWidth = 0.5;\n          } else if (face.headLock === 0.5) {\n            context.strokeStyle = \"blue\";\n          } else {\n            context.strokeStyle = \"orange\";\n            valid = false;\n          }\n          if (valid) {\n            const point = face.samplePoint;\n\n            context.beginPath();\n            context.strokeStyle = \"rgba(255, 0, 0, 0.7)\";\n            context.lineWidth = 1;\n            context.arc(point.x - 0.5, point.y - 0.5, 2, 0, Math.PI * 2);\n            context.stroke();\n\n            context.beginPath();\n            context.moveTo(face.head.bottomLeft.x, face.head.bottomLeft.y);\n            context.lineTo(face.head.topLeft.x, face.head.topLeft.y);\n            context.lineTo(face.head.topRight.x, face.head.topRight.y);\n            context.lineTo(face.head.bottomRight.x, face.head.bottomRight.y);\n            context.lineTo(face.head.bottomLeft.x, face.head.bottomLeft.y);\n            context.stroke();\n          }\n        }\n      }\n      context.restore();\n    }\n\n    /*\n    context.save();\n    if (this.cropBox) {\n\n      // Update crop-box overlay:\n      const cropBox = this.cropBoxPixelBounds;\n      const overlay = new Path2D();\n      context.scale(1, 1);\n      const width = canvas.width;\n      const height = canvas.height;\n      overlay.rect(0, 0, width, height);\n      const ratio = width / underlay.height;\n      overlay.rect(\n          cropBox.x0 * ratio,\n          cropBox.y0 * ratio,\n          (cropBox.x1 - cropBox.x0) * ratio,\n          (cropBox.y1 - cropBox.y0) * ratio\n      );\n      context.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n      context.fill(overlay, \"evenodd\");\n    }\n    context.restore();\n    */\n  }\n\n  get cropBoxPixelBounds(): BoundingBox {\n    const cropBox = this.cropBox;\n    const width = 120;\n    const height = 160;\n    const onePercentWidth = width / 100;\n    const onePercentHeight = height / 100;\n    const bounds = {\n      x0: Math.floor(onePercentWidth * cropBox.left),\n      x1: width - Math.floor(onePercentWidth * cropBox.right),\n      y0: Math.floor(onePercentHeight * cropBox.top),\n      y1: height - Math.floor(onePercentHeight * cropBox.bottom),\n    };\n    return bounds;\n  }\n\n  toggleCropping() {\n    this.canEditCropping = !this.canEditCropping;\n    if (!this.canEditCropping) {\n      this.saveCropChanges();\n    }\n  }\n\n  saveCropChanges() {\n    this.$parent.$emit(\"save-crop-changes\");\n  }\n\n  @Watch(\"frame\")\n  onFrameUpdate(next: Uint16Array) {\n    const canvas = this.$refs.cameraStream;\n    const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    const imgData = context.getImageData(0, 0, canvas.width, canvas.height);\n    const frameData = next;\n    const max = this.max;\n    const min = this.min;\n    if (min !== Number.MAX_SAFE_INTEGER) {\n      const data = new Uint32Array(imgData.data.buffer);\n      const range = max - min;\n      for (let i = 0; i < data.length; i++) {\n        const v = Math.max(\n          0,\n          Math.min(255, ((frameData[i] - min) / range) * 255.0)\n        );\n        data[i] = (255 << 24) | (v << 16) | (v << 8) | v;\n      }\n      context.putImageData(imgData, 0, 0);\n    }\n  }\n\n  @Watch(\"face\")\n  onFaceChanged() {\n    this.updateOverlayCanvas();\n  }\n\n  @Watch(\"thermalReference\")\n  onThermalReferenceChanged() {\n    this.updateOverlayCanvas();\n  }\n\n  @Watch(\"cropBox\")\n  onCropChanged() {\n    this.updateOverlayCanvas();\n  }\n\n  @Emit(\"crop-changed\")\n  gotCropChange(cropBox: CropBox) {\n    this.updateOverlayCanvas();\n    return cropBox;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoStream.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoStream.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VideoStream.vue?vue&type=template&id=6a66e673&scoped=true&\"\nimport script from \"./VideoStream.vue?vue&type=script&lang=ts&\"\nexport * from \"./VideoStream.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VideoStream.vue?vue&type=style&index=0&id=6a66e673&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a66e673\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n","import { NetworkInterface } from \"./types\";\nimport { CalibrationConfig, CalibrationInfo, ScreeningEvent } from \"@/types\";\nimport { Frame } from \"@/camera\";\nconst API_BASE =\n  \"https://ixg63w0770.execute-api.ap-southeast-2.amazonaws.com/event\";\nconst DEVICE_ENDPOINT = (deviceId: string) =>\n  `https://3pu8ojk2ej.execute-api.ap-southeast-2.amazonaws.com/default/devices/${deviceId}`;\n\nexport const ExternalDeviceSettingsApi = {\n  async setDeviceInfo(deviceId: string, qrMode: boolean) {\n    const request = fetch(DEVICE_ENDPOINT(deviceId), {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        qrMode\n      })\n    });\n    const response = await request;\n\n    if (response.status === 200) {\n      const body = await response.json();\n      return body;\n    } else {\n      console.error(response);\n    }\n  },\n  async getDevice(deviceId: string) {\n    const request = fetch(DEVICE_ENDPOINT(deviceId), {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const response = await request;\n\n    if (response.status === 200) {\n      const body = await response.json();\n      return body;\n    } else {\n      console.error(response);\n    }\n  }\n};\n\nexport const ScreeningApi = {\n  async recordScreeningEvent(\n    deviceId: string,\n    deviceSerial: string,\n    data: ScreeningEvent,\n    feverMinThresholdAtRecordingTime: number,\n    QRID?: string | null\n  ) {\n    if (deviceId !== \"\") {\n      const appVersion = data.frame.frameInfo.AppVersion;\n      const Channel =\n        appVersion.includes(\"beta\") || appVersion.includes(\"nightly\")\n          ? \"beta\"\n          : \"stable\";\n      const request = fetch(API_BASE, {\n        method: \"POST\",\n        body: JSON.stringify({\n          Channel,\n          CameraID: `${deviceId}`,\n          Type: \"Screen\",\n          Timestamp: data.timestamp\n            .toISOString()\n            .replace(/:/g, \"_\")\n            .replace(/\\./g, \"_\"),\n          DisplayedTemperature: data.calculatedValue,\n          AppVersion: appVersion,\n          FeverThreshold: feverMinThresholdAtRecordingTime,\n          Meta: {\n            Face: {\n              tL: data.face.head.topLeft,\n              tR: data.face.head.topRight,\n              bL: data.face.head.bottomLeft,\n              bR: data.face.head.bottomRight\n            },\n            Sample: { x: data.sampleX, y: data.sampleY },\n            SampleRaw: Math.round(data.rawTemperatureValue),\n            RefTemp: data.thermalReference.temp,\n            RefRaw: data.thermalReference.val,\n            Telemetry: data.frame.frameInfo.Telemetry\n          },\n          ...(QRID && { QRID })\n        })\n      });\n      const response = await request;\n      const presignedUrl = await response.text();\n      // Based on the user, we find out whether or not to upload a reference image.\n      if (presignedUrl) {\n        // Upload to s3\n        fetch(presignedUrl, {\n          method: \"PUT\",\n          body: data.frame.frame,\n          headers: {\n            \"Content-Type\": \"application/octet-stream\",\n            \"Content-Encoding\": \"utf8\"\n          }\n        });\n      }\n    } else {\n      console.error(\"Can't send telemetry, missing deviceId\");\n    }\n  },\n  async recordCalibrationEvent(\n    deviceId: string,\n    deviceSerial: string,\n    calibrationChanged: boolean,\n    thresholdChanged: boolean,\n    calibration: CalibrationConfig,\n    frame: Frame,\n    x: number,\n    y: number\n  ) {\n    if (deviceId !== \"\") {\n      const appVersion = frame.frameInfo.AppVersion;\n      const Channel =\n        appVersion.includes(\"beta\") || appVersion.includes(\"nightly\")\n          ? \"beta\"\n          : \"stable\";\n      const calibrationPayload = {\n        Channel,\n        CameraID: `${deviceId}`,\n        Type: \"Calibrate\",\n        Timestamp: calibration.timestamp\n          .toISOString()\n          .replace(/:/g, \"_\")\n          .replace(/\\./g, \"_\"),\n        CalibratedTemp: parseFloat(\n          calibration.calibrationTemperature.val.toFixed(2)\n        ),\n        MinFeverThreshold: calibration.thresholdMinFever,\n        ThermalRefTemp: parseFloat(\n          calibration.thermalRefTemperature.val.toFixed(2)\n        ),\n        AppVersion: appVersion,\n        Meta: {\n          Face: calibration.head,\n          Sample: { x, y },\n          SampleRaw: Math.round(calibration.hotspotRawTemperatureValue),\n          RefRaw: Math.round(calibration.thermalReferenceRawValue),\n          Telemetry: frame.frameInfo.Telemetry\n        }\n      };\n      const request = fetch(API_BASE, {\n        method: \"POST\",\n        body: JSON.stringify(calibrationPayload)\n      });\n      const response = await request;\n      // Only upload an image if calibration changed, not threshold.\n      if (response.status === 200 && calibrationChanged) {\n        const presignedUrl = await response.text();\n        // Based on the user, we find out whether or not to upload a reference image.\n        if (presignedUrl) {\n          // Upload to s3\n          fetch(presignedUrl, {\n            method: \"PUT\",\n            body: frame.frame,\n            headers: {\n              \"Content-Type\": \"application/octet-stream\",\n              \"Content-Encoding\": \"utf8\"\n            }\n          });\n        }\n      }\n    } else {\n      console.error(\"Can't sent calibration event, missing deviceId\");\n    }\n  }\n};\n\nexport const DeviceApi = {\n  // Allows videos recorded based on activity.\n  recordUserActivity: false,\n  disableRecordUserActivity: true,\n  registerQRID:\n    window.localStorage.getItem(\"registerQRID\") === \"false\" ? false : true,\n  get DisableRecordUserActivity(): boolean {\n    return this.disableRecordUserActivity;\n  },\n  set DisableRecordUserActivity(disable: boolean) {\n    this.disableRecordUserActivity = disable;\n    this.stopRecording(false);\n  },\n  get RegisterQRID(): boolean {\n    return this.registerQRID;\n  },\n  set RegisterQRID(enable: boolean) {\n    this.registerQRID = enable;\n  },\n  enableQRMode(deviceId: string, enable: boolean) {\n    this.registerQRID = enable;\n    ExternalDeviceSettingsApi.setDeviceInfo(deviceId, enable);\n    window.localStorage.setItem(\"registerQRID\", enable ? \"true\" : \"false\");\n  },\n  get RecordUserActivity(): boolean {\n    return this.recordUserActivity;\n  },\n  set RecordUserActivity(enable: boolean) {\n    this.recordUserActivity = enable;\n    window.localStorage.setItem(\n      \"recordUserActivity\",\n      enable ? \"true\" : \"false\"\n    );\n    this.stopRecording(false);\n  },\n  get debugPrefix() {\n    if (\n      (window.location.port === \"8080\" || window.location.port === \"5000\") &&\n      process.env.NODE_ENV === \"development\"\n    ) {\n      // Used for developing the front-end against an externally running version of the\n      // backend, so it's not necessary to package up the build to do front-end testing.\n      //return \"http://localhost:2041\";\n      //return \"http://192.168.178.37\";\n      //return \"http://192.168.0.181\";\n      return \"http://192.168.86.43\";\n      //return \"http://192.168.0.82\";\n      //return \"http://192.168.178.21\";\n      //return \"http://192.168.0.41\";\n    }\n    return \"\";\n  },\n  get SOFTWARE_VERSION() {\n    return `${this.debugPrefix}/api/version`;\n  },\n  get DEVICE_INFO() {\n    return `${this.debugPrefix}/api/device-info`;\n  },\n  get DEVICE_TIME() {\n    return `${this.debugPrefix}/api/clock`;\n  },\n  get RUN_FFC() {\n    return `${this.debugPrefix}/api/camera/run-ffc`;\n  },\n  get DEVICE_CONFIG() {\n    return `${this.debugPrefix}/api/config`;\n  },\n  get NETWORK_INFO() {\n    return `${this.debugPrefix}/api/network-info`;\n  },\n  get SAVE_CALIBRATION() {\n    return `${this.debugPrefix}/api/calibration/save`;\n  },\n  get LOAD_CALIBRATION() {\n    return `${this.debugPrefix}/api/calibration/get`;\n  },\n  get RECORDER_STATUS() {\n    return `${this.debugPrefix}/recorderstatus`;\n  },\n  get START_RECORDING() {\n    return `${this.debugPrefix}/record?start=true`;\n  },\n  get STOP_RECORDING() {\n    return `${this.debugPrefix}/record?stop=true&dowload=false`;\n  },\n  get DOWNLOAD_RECORDING() {\n    return `${this.debugPrefix}/record?stop=true&download=true`;\n  },\n  async get(url: string) {\n    return fetch(url, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Basic ${btoa(\"admin:feathers\")}`\n      }\n    });\n  },\n  async post(\n    url: string,\n    data:\n      | Blob\n      | BufferSource\n      | FormData\n      | URLSearchParams\n      | ReadableStream<Uint8Array>\n      | string\n      | null\n  ) {\n    return fetch(url, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Basic ${btoa(\"admin:feathers\")}`,\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: data\n    });\n  },\n  async put(url: string) {\n    return fetch(url, {\n      method: \"PUT\",\n      headers: {\n        Authorization: `Basic ${btoa(\"admin:feathers\")}`,\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    });\n  },\n  async getJSON(url: string) {\n    const response = await this.get(url);\n    try {\n      return response.json();\n    } catch (e) {\n      return {};\n    }\n  },\n  async getText(url: string) {\n    const response = await this.get(url);\n    return response.text();\n  },\n  async softwareVersion(): Promise<{\n    apiVersion: number;\n    appVersion: string;\n    binaryVersion: string;\n  }> {\n    return this.getJSON(this.SOFTWARE_VERSION);\n  },\n  async startRecording(): Promise<boolean> {\n    const result = await this.getText(this.START_RECORDING);\n    return result === \"<nil>\";\n  },\n  async stopRecording(download = true): Promise<string> {\n    const result = await this.getText(\n      download ? this.DOWNLOAD_RECORDING : this.STOP_RECORDING\n    );\n    return result;\n  },\n  async deviceInfo(): Promise<{\n    serverURL?: string;\n    devicename: string;\n    deviceID: string;\n    serial: string;\n  }> {\n    return this.getJSON(this.DEVICE_INFO);\n  },\n  async deviceTime() {\n    return this.getJSON(this.DEVICE_TIME);\n  },\n  async recorderStatus() {\n    return this.getJSON(this.RECORDER_STATUS);\n  },\n  async deviceConfig() {\n    return this.getJSON(this.DEVICE_CONFIG);\n  },\n  async runFFC() {\n    return this.put(this.RUN_FFC);\n  },\n  async networkInfo(): Promise<{\n    Interfaces: NetworkInterface[];\n    Config: { Online: boolean };\n  }> {\n    return this.getJSON(this.NETWORK_INFO);\n  },\n  async saveCalibration(data: CalibrationInfo) {\n    // NOTE: This API only supports a json payload one level deep.  No nested structures.\n    const formData = new URLSearchParams();\n    formData.append(\"calibration\", JSON.stringify(data));\n    return this.post(this.SAVE_CALIBRATION, formData);\n  },\n  async getCalibration(): Promise<CalibrationInfo | null> {\n    return this.getJSON(this.LOAD_CALIBRATION);\n  }\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport {\n  AppState,\n  CropBox,\n  DEFAULT_THRESHOLD_MIN_FEVER,\n  InitialFrameInfo,\n  ScreeningEvent,\n  ScreeningState\n} from \"@/types\";\nimport { State } from \"@/main\";\nimport VideoStream from \"@/components/VideoStream.vue\";\nimport { DegreesCelsius } from \"@/utils\";\nimport { mdiMinus, mdiPencil, mdiPlus } from \"@mdi/js\";\nimport { DeviceApi, ScreeningApi } from \"@/api/api\";\n\n@Component({\n  components: { VideoStream }\n})\nexport default class CalibrationSettings extends Vue {\n  private useCustomTemperatureRange = false;\n  private editedTemperatureThreshold = 0;\n  private showCalibrationDialog = false;\n  private editedCropBox: CropBox | null = null;\n  private editedCalibration: DegreesCelsius = new DegreesCelsius(0);\n  private pendingCalibration: DegreesCelsius = new DegreesCelsius(0);\n  private snapshotScreeningEvent: ScreeningEvent | null = null;\n  private playNormalSound = true;\n  private playWarningSound = true;\n  private playErrorSound = true;\n  private deviceName = \"\";\n  private deviceID = \"\";\n  private piSerial = \"\";\n\n  toggleCustomTemperatureThresholds(val: boolean) {\n    if (val) {\n      this.editedTemperatureThreshold = this.state.currentCalibration.thresholdMinFever;\n    }\n    if (!val) {\n      this.editedTemperatureThreshold = DEFAULT_THRESHOLD_MIN_FEVER;\n    }\n    this.persistSettings();\n    // Update custom back to defaults\n  }\n\n  get selectedTemperatureRange() {\n    return `${new DegreesCelsius(this.editedTemperatureThreshold)}`;\n  }\n\n  get hasMadeEdits(): boolean {\n    const unedited = {\n      head: this.state.currentCalibration.head,\n      temperatureThreshold: this.state.currentCalibration.thresholdMinFever,\n      calibration: parseFloat(\n        this.state.currentCalibration.calibrationTemperature.val.toFixed(2)\n      ),\n      sounds: {\n        warning: this.state.currentCalibration.playWarningSound,\n        normal: this.state.currentCalibration.playNormalSound,\n        error: this.state.currentCalibration.playErrorSound\n      }\n    };\n    const edited = {\n      head: this.state.currentCalibration.head,\n      temperatureThreshold: this.editedTemperatureThreshold,\n      calibration: parseFloat(this.editedCalibration.val.toFixed(2)),\n      sounds: {\n        warning: this.playWarningSound,\n        normal: this.playNormalSound,\n        error: this.playErrorSound\n      }\n    };\n    const a = JSON.stringify(edited);\n    const b = JSON.stringify(unedited);\n    return a != b;\n  }\n\n  get plusIcon() {\n    return mdiPlus;\n  }\n\n  get pencilIcon() {\n    return mdiPencil;\n  }\n\n  get minusIcon() {\n    return mdiMinus;\n  }\n\n  get state(): AppState {\n    return State;\n  }\n\n  get canCalibrate() {\n    return this.latestScreeningEvent !== null;\n  }\n\n  get screeningState(): ScreeningState {\n    return this.state.currentScreeningState;\n  }\n\n  get latestScreeningEvent(): ScreeningEvent | null {\n    return this.state.currentScreeningEvent;\n  }\n\n  get calibration(): DegreesCelsius {\n    return this.pendingCalibration;\n  }\n\n  editCalibration() {\n    this.editedCalibration = new DegreesCelsius(this.calibration.val);\n    this.snapshotScreeningEvent = this.latestScreeningEvent;\n    this.showCalibrationDialog = true;\n  }\n\n  async acceptCalibration() {\n    this.pendingCalibration = new DegreesCelsius(this.editedCalibration.val);\n    this.showCalibrationDialog = false;\n    await this.persistSettings();\n  }\n\n  async persistSettings(): Promise<Response | undefined> {\n    // Get these values from the current screening event.\n    const currentCalibration = this.pendingCalibration;\n    let thermalRefTemp = this.state.currentCalibration.thermalRefTemperature\n      .val;\n    let thermalRefRaw = this.state.currentCalibration.thermalReferenceRawValue;\n    let rawTempValue = this.state.currentCalibration.hotspotRawTemperatureValue;\n    const thresholdMinFever = this.editedTemperatureThreshold;\n    let sampleX = -1;\n    let sampleY = -1;\n    let frame = this.state.currentFrame!;\n    let head = {\n      tL: { x: 0, y: 0 },\n      tR: { x: 0, y: 0 },\n      bL: { x: 0, y: 0 },\n      bR: { x: 0, y: 0 }\n    };\n    if (this.snapshotScreeningEvent) {\n      frame = this.snapshotScreeningEvent.frame;\n      head = {\n        tL: this.snapshotScreeningEvent.face.head.topLeft,\n        tR: this.snapshotScreeningEvent.face.head.topRight,\n        bL: this.snapshotScreeningEvent.face.head.bottomLeft,\n        bR: this.snapshotScreeningEvent.face.head.bottomRight\n      };\n      thermalRefRaw = this.snapshotScreeningEvent.thermalReference.val;\n      rawTempValue = this.snapshotScreeningEvent.rawTemperatureValue;\n      thermalRefTemp =\n        currentCalibration.val - (rawTempValue - thermalRefRaw) * 0.01;\n      sampleX = this.snapshotScreeningEvent.sampleX;\n      sampleY = this.snapshotScreeningEvent.sampleY;\n    }\n    const timestamp = new Date();\n    const calibrationChanged =\n      currentCalibration.val !==\n      this.state.currentCalibration.calibrationTemperature.val;\n    const thresholdChanged =\n      thresholdMinFever !== this.state.currentCalibration.thresholdMinFever;\n    const headBoundsChanged =\n      JSON.stringify(head) !==\n      JSON.stringify(this.state.currentCalibration.head);\n    if (calibrationChanged || thresholdChanged || headBoundsChanged) {\n      // Only update the server log for threshold or calibration changes, not for sound effect prefs etc.\n      ScreeningApi.recordCalibrationEvent(\n        this.deviceID,\n        this.piSerial,\n        calibrationChanged,\n        thresholdChanged,\n        {\n          head,\n          timestamp: timestamp,\n          calibrationTemperature: currentCalibration,\n          hotspotRawTemperatureValue: rawTempValue,\n          thermalRefTemperature: new DegreesCelsius(thermalRefTemp),\n          thermalReferenceRawValue: thermalRefRaw,\n          thresholdMinFever,\n          playErrorSound: this.playErrorSound,\n          playWarningSound: this.playWarningSound,\n          playNormalSound: this.playNormalSound\n        },\n        frame,\n        sampleX,\n        sampleY\n      );\n    }\n    {\n      // For non-live playback\n      InitialFrameInfo.Calibration.ThermalRefTemp = thermalRefTemp;\n      InitialFrameInfo.Calibration.TemperatureCelsius = parseFloat(\n        currentCalibration.val.toFixed(2)\n      );\n      InitialFrameInfo.Calibration.UseErrorSound = this.playErrorSound;\n      InitialFrameInfo.Calibration.UseNormalSound = this.playNormalSound;\n      InitialFrameInfo.Calibration.UseWarningSound = this.playWarningSound;\n    }\n    const newCalibration = {\n      ThresholdMinFever: thresholdMinFever,\n      ThermalRefTemp: thermalRefTemp,\n      TemperatureCelsius: parseFloat(currentCalibration.val.toFixed(2)),\n      HeadTLX: head.tL.x,\n      HeadTLY: head.tL.y,\n      HeadBLX: head.bL.x,\n      HeadBLY: head.bL.y,\n      HeadTRX: head.tR.x,\n      HeadTRY: head.tR.y,\n      HeadBRX: head.bR.x,\n      HeadBRY: head.bR.y,\n      UuidOfUpdater: this.state.uuid,\n      CalibrationBinaryVersion: this.state.currentFrame!.frameInfo\n        .BinaryVersion,\n      SnapshotTime: timestamp.getTime(),\n      SnapshotValue: rawTempValue,\n      UseNormalSound: this.playNormalSound,\n      UseWarningSound: this.playWarningSound,\n      UseErrorSound: this.playErrorSound\n    };\n    return DeviceApi.saveCalibration(newCalibration);\n  }\n\n  incrementCalibration(amount: number) {\n    this.editedCalibration = new DegreesCelsius(\n      this.editedCalibration.val + amount\n    );\n  }\n\n  updateCalibration(event: FocusEvent) {\n    const value = (event.target as HTMLInputElement).value\n      .replace(\"&deg;\", \"\")\n      .replace(\"\", \"\");\n    if (isNaN(Number(value))) {\n      this.editedCalibration = new DegreesCelsius(36);\n    }\n    this.editedCalibration = new DegreesCelsius(Number(value));\n  }\n\n  resetEdits() {\n    this.pendingCalibration = new DegreesCelsius(\n      this.state.currentCalibration.calibrationTemperature.val\n    );\n    this.editedCalibration = new DegreesCelsius(\n      this.state.currentCalibration.calibrationTemperature.val\n    );\n    this.editedTemperatureThreshold = this.state.currentCalibration.thresholdMinFever;\n    this.useCustomTemperatureRange =\n      this.editedTemperatureThreshold !== DEFAULT_THRESHOLD_MIN_FEVER;\n    this.playNormalSound = this.state.currentCalibration.playNormalSound;\n    this.playWarningSound = this.state.currentCalibration.playWarningSound;\n    this.playErrorSound = this.state.currentCalibration.playErrorSound;\n  }\n\n  private saving = false;\n  async saveEdits() {\n    this.saving = true;\n    await this.persistSettings();\n    this.saving = false;\n  }\n\n  async beforeMount() {\n    const { deviceID, devicename, serial } = await DeviceApi.deviceInfo();\n    this.deviceID = deviceID;\n    this.deviceName = devicename;\n    this.piSerial = serial;\n    this.resetEdits();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CalibrationSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CalibrationSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CalibrationSettings.vue?vue&type=template&id=bf659bf4&scoped=true&\"\nimport script from \"./CalibrationSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./CalibrationSettings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CalibrationSettings.vue?vue&type=style&index=0&id=bf659bf4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf659bf4\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardSubtitle,VCardText,VCardTitle,VCheckbox,VCol,VContainer,VDialog,VIcon,VOverlay,VRow,VSlider,VSpacer,VSwitch,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\"}},[(_vm.items)?_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"Device config\")]),_c('th',{staticClass:\"text-left\"})])]),_c('tbody',_vm._l((_vm.items),function(ref){\nvar name = ref[0];\nvar item = ref[1];\nreturn _c('tr',{key:name},[_c('td',[_vm._v(_vm._s(name))]),_c('td',[_vm._v(_vm._s(item))])])}),0)]},proxy:true}],null,false,421180828)}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { AppState } from \"@/types\";\nimport { State } from \"@/main\";\nimport { DeviceApi } from \"@/api/api\";\nimport { CameraInfo, NetworkInterface } from \"@/api/types\";\n\n@Component\nexport default class DeviceInfo extends Vue {\n  private info: {\n    devicename?: string;\n    deviceID?: string;\n    serial?: string;\n  } = {};\n  private networkInfo: {\n    Interfaces?: NetworkInterface[];\n    IPAddress?: string;\n    Config?: { Online: boolean };\n    Online?: boolean;\n  } = {};\n  private softwareVersion: {\n    apiVersion?: number;\n    appVersion?: string;\n    binaryVersion?: string;\n  } = {};\n\n  get items() {\n    return [\n      ...Object.entries(this.info),\n      ...Object.entries(this.softwareVersion),\n      ...Object.entries(this.networkInfo),\n      ...Object.entries(this.cameraInfo),\n    ];\n  }\n\n  get cameraInfo() {\n    const camera: CameraInfo = {\n      ...State.currentFrame?.frameInfo.Camera,\n    } as CameraInfo;\n    return camera as any;\n  }\n\n  get state(): AppState {\n    return State;\n  }\n\n  async beforeMount() {\n    // Get all the device data.\n    const info = await DeviceApi.deviceInfo();\n\n    this.info = info;\n    const networkInfo = await DeviceApi.networkInfo();\n    let IPAddress = networkInfo.Interfaces.filter(\n      (nic) => nic.IPAddresses !== null\n    ).map((nic) => nic.IPAddresses![0])[0];\n    IPAddress = IPAddress.substring(0, IPAddress.indexOf(\"/\"));\n    this.networkInfo = {\n      Online: networkInfo.Config.Online,\n      IPAddress,\n    };\n\n    const softwareVersion = await DeviceApi.softwareVersion();\n    softwareVersion.binaryVersion = softwareVersion.binaryVersion.substring(\n      0,\n      10\n    );\n    const newLine = softwareVersion.appVersion.indexOf(\"\\n\");\n    if (newLine !== -1) {\n      softwareVersion.appVersion = softwareVersion.appVersion.substring(\n        0,\n        newLine\n      );\n    }\n    this.softwareVersion = softwareVersion;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DeviceInfo.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DeviceInfo.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeviceInfo.vue?vue&type=template&id=a2dc84ae&scoped=true&\"\nimport script from \"./DeviceInfo.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeviceInfo.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a2dc84ae\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\ninstallComponents(component, {VCard,VSimpleTable})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-container',{staticClass:\"cont\",attrs:{\"height\":\"calc(100vh - 112px)\"}},[_c('v-card',[_c('v-card-actions',[_c('v-btn',{staticClass:\"ml-6\",on:{\"click\":_vm.skipWarmup}},[_vm._v(\"Skip warmup period\")]),(!_vm.disableRecordUserActivity)?_c('v-switch',{staticClass:\"pl-6\",attrs:{\"label\":\"Record User Activities\"},model:{value:(_vm.recordUserActivity),callback:function ($$v) {_vm.recordUserActivity=$$v},expression:\"recordUserActivity\"}}):_vm._e(),_c('v-switch',{staticClass:\"pl-6\",attrs:{\"label\":\"Enable QR mode\",\"disabled\":_vm.cameraAvailable},model:{value:(_vm.qrMode),callback:function ($$v) {_vm.qrMode=$$v},expression:\"qrMode\"}})],1),_c('VideoStream',{attrs:{\"frame\":_vm.state.currentFrame.frame,\"face\":_vm.state.face,\"min\":_vm.state.currentFrame.analysisResult.heatStats.min,\"max\":_vm.state.currentFrame.analysisResult.heatStats.max,\"crop-box\":_vm.editedThermalRefMask,\"crop-enabled\":false,\"recording\":_vm.isRecording},on:{\"crop-changed\":_vm.onMaskChanged}}),_c('div',{staticClass:\"buttons\"},[(_vm.isRunningInAndroidWebview)?_c('div',[_vm._v(\" To make recordings this needs to be running inside a browser, not the Te Kahu Ora app. \")]):_c('div',[_c('v-btn',{staticClass:\"mb-4\",attrs:{\"center\":\"\"},on:{\"click\":_vm.toggleRecording}},[_vm._v(\" \"+_vm._s(!_vm.isRecording ? \"Record\" : \"Stop Recording\")+\" \")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport VideoStream from \"@/components/VideoStream.vue\";\nimport { State } from \"@/main\";\nimport { AppState, CropBox } from \"@/types\";\nimport { ObservableDeviceApi as DeviceApi } from \"@/main\";\nimport QrScanner from \"qr-scanner\";\n\nfunction download(dataurl: string) {\n  const a = document.createElement(\"a\");\n  a.href = dataurl;\n  a.setAttribute(\"download\", dataurl);\n  a.click();\n}\n\n@Component({\n  components: {\n    VideoStream\n  }\n})\nexport default class DeveloperUtilities extends Vue {\n  private editedThermalRefMask: CropBox | null = null;\n  private isRecording = false;\n  private enableQR = false;\n\n  get cameraAvailable() {\n    return this.enableQR;\n  }\n\n  get recordUserActivity() {\n    return DeviceApi.RecordUserActivity;\n  }\n\n  set recordUserActivity(enable: boolean) {\n    DeviceApi.RecordUserActivity = enable;\n  }\n\n  get disableRecordUserActivity() {\n    return DeviceApi.DisableRecordUserActivity;\n  }\n\n  get qrMode() {\n    return DeviceApi.RegisterQRID;\n  }\n\n  set qrMode(enable: boolean) {\n    DeviceApi.deviceInfo().then(({ deviceID }) => {\n      DeviceApi.enableQRMode(deviceID, enable);\n    });\n  }\n\n  skipWarmup() {\n    this.$root.$children[0].$children[0].$emit(\"skip-warmup\");\n  }\n\n  onMaskChanged(box: CropBox) {\n    this.editedThermalRefMask = box;\n  }\n\n  get state(): AppState {\n    return State;\n  }\n\n  get isRunningInAndroidWebview(): boolean {\n    return window.navigator.userAgent === \"feverscreen-app\";\n  }\n\n  async toggleRecording() {\n    const { recording, processor } = await DeviceApi.recorderStatus();\n    if (!processor) {\n      return false;\n    }\n    if (recording) {\n      download(DeviceApi.DOWNLOAD_RECORDING);\n      this.isRecording = false;\n    } else {\n      this.isRecording = await DeviceApi.startRecording();\n    }\n  }\n\n  async mounted() {\n    const { recording } = await DeviceApi.recorderStatus();\n    this.enableQR = !(await QrScanner.hasCamera());\n    this.isRecording = recording;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DeveloperUtilities.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DeveloperUtilities.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeveloperUtilities.vue?vue&type=template&id=1eaa0af9&scoped=true&\"\nimport script from \"./DeveloperUtilities.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeveloperUtilities.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DeveloperUtilities.vue?vue&type=style&index=0&id=1eaa0af9&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eaa0af9\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\ninstallComponents(component, {VBtn,VCard,VCardActions,VContainer,VSwitch})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Emit, Prop, Vue } from \"vue-property-decorator\";\nimport CalibrationSettings from \"@/components/CalibrationSettings.vue\";\nimport DeviceInfo from \"@/components/DeviceInfo.vue\";\nimport DeveloperUtilities from \"@/components/DeveloperUtilities.vue\";\n\ninterface TabItem {\n  tab: string;\n  content: any;\n}\n\n@Component({\n  components: {\n    CalibrationSettings,\n    DeviceInfo,\n    DeveloperUtilities\n  }\n})\nexport default class AdminSettings extends Vue {\n  private tab: TabItem | null = null;\n  private tabItems: TabItem[] = [\n    {\n      tab: \"Calibration\",\n      content: CalibrationSettings\n    },\n    {\n      tab: \"Device info\",\n      content: DeviceInfo\n    },\n    {\n      tab: \"Developer\",\n      content: DeveloperUtilities\n    }\n  ];\n\n  @Emit(\"closed\")\n  close() {\n    return true;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AdminSettings.vue?vue&type=template&id=dc077da8&scoped=true&\"\nimport script from \"./AdminSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./AdminSettings.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dc077da8\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VSpacer,VTab,VTabItem,VTabs,VTabsItems,VToolbar,VToolbarTitle})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Possible states:\n// - Camera is still warming up\n//  (this should still want to find the constant heat source, because we want to make\n//   sure that's warming up at the same time)\n// - Frame is empty, no head detected.\n// - Head detected, but not centered.\n// - More than one head detected in frame.\n// - No constant heat-source detected.\n// - Head detected, and forehead isolated.\n// - Head has been front-on for x frames, with stable forehead lock.\n\n// - Other states:\n//      - Wifi has been lost (maybe don't care about this case now if we're wired?)\n//      - FFC is happening\n//      - Period *after* FFC, which we need to hide.\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { mdiCog } from \"@mdi/js\";\nimport {\n  CalibrationConfig,\n  FaceInfo,\n  ScreeningEvent,\n  ScreeningState,\n} from \"@/types\";\nimport { DegreesCelsius } from \"@/utils\";\nimport AdminSettings from \"@/components/AdminSettings.vue\";\nimport { LerpAmount, WARMUP_TIME_SECONDS } from \"@/main\";\nimport { Point, Shape, Span } from \"@/geom\";\n\nconst PROBABLE_ERROR_TEMP = 42.5;\nconst thermalRefWidth = 42;\n\nfunction lerp(a: number, amt: number, b: number): number {\n  return a * amt + b * (1 - amt);\n}\n\nfunction closestY(prev: Span[], y: number): Span | undefined {\n  const best = prev\n    .map((x) => ({ d: Math.abs(Number(x.y) - y), x }))\n    .sort((a, b) => b.d - a.d)\n    .pop() as { x: Span; d: number };\n  return prev.find((x) => x.y === best.x.y);\n}\n\nfunction interpolateShapes(prev: Shape, amt: number, next: Shape): Shape {\n  // For each row with the same y, interpolate x0 and x0 and x1 and x1 linearly on x.\n  // Then it's a matter of figuring out what to do with the rest.\n  amt = 1 - amt;\n  const result = [];\n  // TODO(jon): Start at the bottom.\n\n  for (let i = 0; i < next.length; i++) {\n    const rowNext = next[i];\n    const y = rowNext.y;\n    if (prev[i]) {\n      // Move others across in x the same amount as the adjacent ones that *do* exist.\n      const rowPrev = prev[i];\n      result.push({\n        x0: lerp(rowPrev.x0, amt, rowNext.x0),\n        x1: lerp(rowPrev.x1, amt, rowNext.x1),\n        y: Number(y),\n      });\n    } else {\n      // What's the closest point on prev?\n      // Let's use that.\n      const rowPrev = closestY(prev, y) as unknown as Span;\n      // Should actually be the amount that rowPrev moved compared with\n      // it's corresponding row in rowNext.\n      result.push({\n        x0: lerp(rowPrev.x0, amt, rowNext.x0),\n        x1: lerp(rowPrev.x1, amt, rowNext.x1),\n        y: Number(y),\n      });\n    }\n  }\n  return result;\n}\n\nlet frameNum = 0;\n\nlet curveFitting: { fitCurveThroughPoints: (pts: Uint8Array) => number[] };\n\ninterface Message {\n  message: string;\n  count: number;\n}\n\nconst Sound = new Audio();\n\n@Component({\n  components: {\n    AdminSettings,\n  },\n})\nexport default class UserFacingScreening extends Vue {\n  @Prop({ required: true }) state!: ScreeningState;\n  @Prop({ required: true }) screeningEvent!: null | ScreeningEvent;\n  @Prop({ required: true }) calibration!: CalibrationConfig;\n  @Prop({ required: true }) onReferenceDevice!: boolean;\n  @Prop({ required: true }) face!: FaceInfo | null;\n  @Prop({ required: true }) shapes!: [Shape[], Shape[]];\n  @Prop({ required: true }) warmupSecondsRemaining!: number;\n  @Prop({ required: true }) isTesting!: number;\n  @Prop({ required: true }) thermalRefSide!: \"left\" | \"right\";\n  @Prop({ default: true }) showCanvas!: boolean;\n\n  get isLocal(): boolean {\n    return (\n      (window.location.port === \"5000\" || window.location.port === \"8080\") &&\n      process.env.NODE_ENV === \"development\"\n    );\n  }\n\n  private didInteract = false;\n\n  private showSettings = false;\n  private hasSettings = false;\n  private shouldLeaveFrame = false;\n  private prevFrameTime = performance.now();\n\n  $refs!: {\n    beziers: HTMLCanvasElement;\n    QRRef: SVGImageElement;\n  };\n\n  stateQueue: Message[] = [];\n\n  closedAdminSettings() {\n    this.showSettings = false;\n    setTimeout(() => {\n      this.hasSettings = false;\n    }, 300);\n  }\n\n  set interacted(val: boolean) {\n    // Don't allow interaction if the camera isn't getting frames.\n    this.didInteract = val;\n    setTimeout(() => (this.didInteract = false), 5000);\n  }\n\n  get interacted(): boolean {\n    return this.didInteract;\n  }\n\n  get cogIcon() {\n    return mdiCog;\n  }\n\n  async beforeMount() {\n    curveFitting = await import(\"../../curve-fit\");\n  }\n  private canvasWidth = 710;\n  private canvasHeight = 1080;\n\n  mounted() {\n    if (this.$refs.beziers) {\n      const aspectRatio = 4 / 3;\n      if (navigator.userAgent.includes(\"Lenovo TB-X605LC\")) {\n        this.canvasHeight = document.body.getBoundingClientRect().height;\n      } else {\n        this.canvasHeight = (\n          this.$refs.beziers.parentElement as HTMLElement\n        ).getBoundingClientRect().height;\n      }\n      this.canvasWidth = this.canvasHeight / aspectRatio;\n      this.$refs.beziers.style.width = `${this.canvasWidth}px`;\n      this.$refs.beziers.style.height = `${this.canvasHeight}px`;\n      const ctx = this.$refs.beziers.getContext(\n        \"2d\"\n      ) as CanvasRenderingContext2D;\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = \"rgba(255, 255, 255, 0.5)\";\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.2)\";\n      ctx.lineWidth = 2;\n      ctx.lineCap = \"round\";\n    }\n    window.requestAnimationFrame(this.drawBezierOutline.bind(this));\n  }\n\n  get messageText(): string {\n    let message = \"Ready\";\n    if (this.isWarmingUp) {\n      message = `Warming up, <span>${this.remainingWarmupTime}</span> remaining`;\n    } else if (this.isAfterFFCEvent) {\n      message = \"One moment...\";\n    } else if (this.isAquiring) {\n      message = \"Hold still...\";\n    } else if (this.isTooFar) {\n      message = \"Come closer\";\n    } else if (this.missingRef) {\n      message = \"Missing reference\";\n    }\n    this.logForTest(message);\n    return message;\n  }\n\n  get screeningAdvice(): string {\n    if (this.temperatureIsNormal) {\n      return \"You're good to go!\";\n    } else if (this.temperatureIsHigherThanNormal) {\n      return \"Get checked out now!\";\n    } else {\n      return \"Please check calibration\";\n    }\n  }\n\n  get finishScan(): boolean {\n    return this.state === ScreeningState.MEASURED;\n  }\n\n  @Watch(\"screeningEvent\")\n  onScreeningEventChange(event: ScreeningEvent | null) {\n    if (event !== null) {\n      const calibration = event.frame.frameInfo.Calibration;\n      if (this.temperatureIsNormal) {\n        if (calibration.UseNormalSound) {\n          Sound.src = `${process.env.BASE_URL}sounds/341695_5858296-lq.mp3`;\n          Sound.play();\n        }\n      } else if (this.temperatureIsHigherThanNormal) {\n        if (calibration.UseWarningSound) {\n          Sound.src = `${process.env.BASE_URL}sounds/445978_9159316-lq.mp3`;\n          Sound.play();\n        }\n      } else if (this.temperatureIsProbablyAnError) {\n        if (calibration.UseErrorSound) {\n          Sound.src = `${process.env.BASE_URL}sounds/142608_1840739-lq.mp3`;\n          Sound.play();\n        }\n      }\n    }\n  }\n\n  drawBezierOutline() {\n    // Maybe we give the start and end shapes, and interpolate those, and convert to beziers each frame?\n    // const toRemove = [];\n    // for (const message of this.stateQueue) {\n    //   message.count--;\n    //   if (message.count === 0) {\n    //     toRemove.push(message);\n    //   }\n    // }\n    // for (const message of toRemove) {\n    //   if (this.stateQueue.length !== 1) {\n    //     //console.log(\"removing\", message.message);\n    //     this.stateQueue.splice(this.stateQueue.indexOf(message), 1);\n    //   }\n    // }\n\n    // If this is 9fps, we should interpolate ~5 frames in between.\n    // Let's try and draw a nice curve around the shape:\n    // Get the edge of the shape:\n    if (\n      this.screeningEvent &&\n      new Date().getTime() - this.screeningEvent.timestamp.getTime() > 1000\n    ) {\n      this.shouldLeaveFrame = true;\n    } else {\n      this.shouldLeaveFrame = false;\n    }\n    frameNum++;\n    const ctx = this.$refs.beziers.getContext(\"2d\") as CanvasRenderingContext2D;\n    const leftOffset = 0;\n    const rightOffset = 120 - thermalRefWidth;\n\n    if (ctx) {\n      ctx.clearRect(0, 0, 810, 1080);\n      ctx.save();\n      ctx.translate(thermalRefWidth / 2, 0);\n      ctx.scale(6.75, 6.75);\n      if (this.shapes.length === 2) {\n        // TODO(jon): Would Object.freeze be a better strategy for opting out of reactivity?\n        const prevShape = this.shapes[0];\n        const nextShape = this.shapes[1];\n\n        // TODO(jon): If there's no nextShape, create one to the side that prevShape seemed to be\n        // going off on.\n        if (prevShape && nextShape && prevShape.length && nextShape.length) {\n          const interpolatedShape = interpolateShapes(\n            prevShape[0],\n            LerpAmount.amount,\n            nextShape[0]\n          );\n\n          const now = performance.now();\n          const elapsedSincePrevFrame = now - this.prevFrameTime;\n          this.prevFrameTime = now;\n          LerpAmount.amount += elapsedSincePrevFrame / 100;\n          LerpAmount.amount = Math.min(1, LerpAmount.amount);\n\n          const pointsArray = new Uint8Array(interpolatedShape.length * 4);\n          let i = 0;\n          interpolatedShape.reverse();\n          let offset = 0;\n          if (this.thermalRefSide === \"left\") {\n            offset = thermalRefWidth;\n          }\n          for (const row of interpolatedShape) {\n            pointsArray[i++] = row.x1 - offset;\n            pointsArray[i++] = row.y;\n          }\n          interpolatedShape.reverse();\n          for (const row of interpolatedShape) {\n            pointsArray[i++] = row.x0 - offset;\n            pointsArray[i++] = row.y;\n          }\n          let bezierPts: number[] = [];\n          if (pointsArray.length >= 4) {\n            bezierPts = curveFitting.fitCurveThroughPoints(pointsArray);\n          }\n          if (bezierPts.length) {\n            {\n              {\n                let headWidth = 0;\n                if (this.face) {\n                  const distance = (a: Point, b: Point) => {\n                    const dX = a.x - b.x;\n                    const dY = a.y - b.y;\n                    return Math.sqrt(dX * dX + dY * dY);\n                  };\n                  headWidth = distance(\n                    this.face.head.bottomLeft,\n                    this.face.head.bottomRight\n                  );\n                }\n                const strokeAlpha = 0.2 + headWidth / 120;\n                ctx.strokeStyle = `rgba(255, 255, 255, ${strokeAlpha})`;\n                ctx.setLineDash([3, 8]);\n                ctx.lineDashOffset = (frameNum / 5) % 10; //Math.abs(((frameNum / 20) % 5) - 2.5);\n                ctx.beginPath();\n                ctx.moveTo(bezierPts[0], bezierPts[1]);\n                for (let i = 2; i < bezierPts.length; i += 6) {\n                  ctx.bezierCurveTo(\n                    bezierPts[i],\n                    bezierPts[i + 1],\n                    bezierPts[i + 2],\n                    bezierPts[i + 3],\n                    bezierPts[i + 4],\n                    bezierPts[i + 5]\n                  );\n                }\n                ctx.stroke();\n              }\n            }\n            {\n              if (this.screeningEvent) {\n                let samplePointLerp = Math.min(\n                  1.0,\n                  (new Date().getTime() -\n                    this.screeningEvent.timestamp.getTime()) /\n                    600\n                );\n                samplePointLerp *= samplePointLerp;\n                ctx.beginPath();\n                ctx.fillStyle = `rgba(255, 255, 255, ${\n                  Math.abs(1.0 - samplePointLerp) * 0.6\n                })`;\n                ctx.arc(\n                  this.screeningEvent.sampleX - offset,\n                  this.screeningEvent.sampleY,\n                  samplePointLerp * 8,\n                  0,\n                  Math.PI * 2\n                );\n                ctx.fill();\n              }\n            }\n            ctx.save();\n            // TODO(jon): Bake this alpha mask to a texture if things seem slow.\n            ctx.globalCompositeOperation = \"destination-out\";\n            const leftGradient = ctx.createLinearGradient(leftOffset, 0, 10, 0);\n            leftGradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n            leftGradient.addColorStop(0.25, \"rgba(0, 0, 0, 230)\");\n            leftGradient.addColorStop(0, \"rgba(0, 0, 0, 255)\");\n            const rightGradient = ctx.createLinearGradient(\n              rightOffset - 10,\n              0,\n              rightOffset,\n              0\n            );\n            rightGradient.addColorStop(1, \"rgba(0, 0, 0, 255)\");\n            rightGradient.addColorStop(0.75, \"rgba(0, 0, 0, 230)\");\n            rightGradient.addColorStop(0, \"rgba(0, 0, 0, 0)\");\n\n            const topGradient = ctx.createLinearGradient(0, 0, 0, 10);\n            topGradient.addColorStop(0, \"rgba(0, 0, 0, 255)\");\n            topGradient.addColorStop(0.45, \"rgba(0, 0, 0, 230)\");\n            topGradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n\n            const bottomGradient = ctx.createLinearGradient(0, 150, 0, 160);\n            bottomGradient.addColorStop(1, \"rgba(0, 0, 0, 255)\");\n            bottomGradient.addColorStop(0.75, \"rgba(0, 0, 0, 230)\");\n            bottomGradient.addColorStop(0, \"rgba(0, 0, 0, 0)\");\n\n            ctx.fillStyle = leftGradient;\n            ctx.fillRect(leftOffset, 0, 15, 160);\n            ctx.fillStyle = rightGradient;\n            ctx.fillRect(rightOffset - 10, 0, 15, 160);\n            ctx.fillStyle = topGradient;\n            ctx.fillRect(0, 0, 120 - thermalRefWidth, 10);\n            ctx.fillStyle = bottomGradient;\n            ctx.fillRect(0, 150, 120 - thermalRefWidth, 10);\n            ctx.restore();\n          }\n        }\n\n        // Draw corner indicators:\n        ctx.setLineDash([]);\n\n        const insetY = 15;\n        const insetX = 5;\n        const len = 10;\n        const width = 120 - thermalRefWidth;\n        const height = 160;\n        ctx.beginPath();\n        ctx.moveTo(insetX + len, insetY);\n        ctx.lineTo(insetX, insetY);\n        ctx.lineTo(insetX, insetY + len);\n\n        ctx.moveTo(insetX + len, height - insetY);\n        ctx.lineTo(insetX, height - insetY);\n        ctx.lineTo(insetX, height - (insetY + len));\n\n        ctx.moveTo(width - (insetX + len), insetY);\n        ctx.lineTo(width - insetX, insetY);\n        ctx.lineTo(width - insetX, insetY + len);\n\n        ctx.moveTo(width - (insetX + len), height - insetY);\n        ctx.lineTo(width - insetX, height - insetY);\n        ctx.lineTo(width - insetX, height - (insetY + len));\n        ctx.stroke();\n        ctx.restore();\n      }\n    }\n    requestAnimationFrame(this.drawBezierOutline.bind(this));\n  }\n\n  get temperature(): DegreesCelsius {\n    if (this.screeningEvent) {\n      const temp = new DegreesCelsius(this.screeningEvent.face.sampleTemp);\n      this.logForTest(`Temperature is ${temp}`);\n      return temp;\n    }\n    return new DegreesCelsius(0);\n  }\n\n  get temperatureIsNormal(): boolean {\n    return this.temperature.val < this.calibration.thresholdMinFever;\n  }\n\n  get temperatureIsHigherThanNormal(): boolean {\n    return (\n      this.temperature.val >= this.calibration.thresholdMinFever &&\n      this.temperature.val <= PROBABLE_ERROR_TEMP\n    );\n  }\n\n  get temperatureIsProbablyAnError(): boolean {\n    return this.temperature.val > PROBABLE_ERROR_TEMP;\n  }\n\n  get classNameForState() {\n    return this.state.toLowerCase().replace(\"_\", \"-\");\n  }\n\n  get screeningResultClass() {\n    if (this.screeningEvent) {\n      if (this.temperatureIsNormal) {\n        return \"okay\"; // or possible-fever, or error-temp\n      } else if (this.temperatureIsHigherThanNormal) {\n        return \"possible-fever\";\n      } else if (this.temperatureIsProbablyAnError) {\n        return \"error\";\n      }\n    }\n\n    return null;\n  }\n\n  get hasScreeningResult(): boolean {\n    return this.screeningResultClass !== null;\n  }\n\n  get isTooFar(): boolean {\n    return this.state === ScreeningState.TOO_FAR;\n  }\n\n  get isWarmingUp(): boolean {\n    return this.state === ScreeningState.WARMING_UP;\n  }\n\n  get warmupBackgroundColour(): string {\n    // Lerp between\n    const hueStart = 37;\n    const saturationStart = 70;\n    const lightnessStart = 66;\n\n    const hueEnd = 198;\n    const saturationEnd = 100;\n    const lightnessEnd = 42;\n\n    const val = Math.min(\n      1,\n      (WARMUP_TIME_SECONDS - this.warmupSecondsRemaining) / WARMUP_TIME_SECONDS\n    );\n\n    const hue = lerp(hueEnd, val, hueStart);\n    const saturation = lerp(saturationEnd, val, saturationStart);\n    const lightness = lerp(lightnessEnd, val, lightnessStart);\n    return `hsl(${hue}, ${saturation}%, ${lightness}%)`;\n  }\n\n  get isAfterFFCEvent(): boolean {\n    return this.state === ScreeningState.AFTER_FFC_EVENT;\n  }\n\n  get isAquiring(): boolean {\n    return (\n      this.state === ScreeningState.LARGE_BODY ||\n      this.state === ScreeningState.FACE_LOCK ||\n      this.state === ScreeningState.HEAD_LOCK ||\n      this.state === ScreeningState.FRONTAL_LOCK ||\n      this.state === ScreeningState.BLURRED ||\n      this.state === ScreeningState.STABLE_LOCK\n    );\n  }\n\n  get missingRef(): boolean {\n    return this.state === ScreeningState.MISSING_THERMAL_REF;\n  }\n\n  get remainingWarmupTime(): string {\n    const secondsRemaining = this.warmupSecondsRemaining;\n    const minsRemaining = Math.floor(secondsRemaining / 60);\n    const seconds = secondsRemaining - minsRemaining * 60;\n    return ` ${String(minsRemaining).padStart(2, \"0\")}:${String(\n      Math.floor(seconds)\n    ).padStart(2, \"0\")}`;\n  }\n\n  get message(): Message {\n    switch (this.state) {\n      case ScreeningState.WARMING_UP:\n        return { message: \"Please wait\", count: Number.MAX_SAFE_INTEGER };\n      case ScreeningState.MULTIPLE_HEADS:\n        return {\n          message: \"Only one person should be in front of the camera\",\n          count: 60,\n        };\n\n      case ScreeningState.HEAD_LOCK:\n      case ScreeningState.FACE_LOCK:\n        return {\n          message: \"Please look straight ahead\",\n          count: -1,\n        };\n      case ScreeningState.FRONTAL_LOCK:\n      case ScreeningState.BLURRED:\n        return { message: \"Great, now hold still a moment\", count: 120 };\n      case ScreeningState.STABLE_LOCK:\n        if (this.screeningEvent) {\n          if (this.temperatureIsNormal) {\n            return { message: `Your temperature is normal`, count: 460 };\n          } else if (this.temperatureIsHigherThanNormal) {\n            return {\n              message:\n                \"Your temperature is higher than normal, please don't enter\",\n              count: 180,\n            };\n          } else if (this.temperatureIsProbablyAnError) {\n            return {\n              message: \"Temperature anomaly, please check equipment\",\n              count: 360,\n            };\n          }\n        }\n        break;\n      case ScreeningState.MEASURED:\n        if (this.screeningEvent) {\n          if (this.temperatureIsNormal) {\n            return { message: \"You're good to go!\", count: -1 };\n          } else {\n            return {\n              message: \"You can go, but you need to get a follow-up\",\n              count: -1,\n            };\n          }\n        } else {\n          return {\n            message: \"\",\n            count: -1,\n          };\n        }\n      case ScreeningState.READY:\n      default:\n        return { message: \"Ready to screen\", count: Number.MAX_SAFE_INTEGER };\n    }\n    return { message: \"\", count: 0 };\n  }\n\n  logForTest(message: string) {\n    if (this.isTesting) {\n      this.$emit(\"new-message\", message);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserFacingScreening.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserFacingScreening.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UserFacingScreening.vue?vue&type=template&id=19846409&scoped=true&\"\nimport script from \"./UserFacingScreening.vue?vue&type=script&lang=ts&\"\nexport * from \"./UserFacingScreening.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./UserFacingScreening.vue?vue&type=style&index=0&id=19846409&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19846409\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VCard,VCardActions,VDialog,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('pre',{ref:\"logContainer\",staticClass:\"log-container\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from \"vue-property-decorator\";\n@Component\nexport default class LoggingInterface extends Vue {\n  @Prop() framePos!: number;\n  @Prop() frameLogs!: string[][];\n  $refs!: {\n    logContainer: HTMLElement;\n  };\n\n  mounted() {\n    console.info(\"Test\");\n  }\n\n  @Watch(\"framePos\")\n  onFrameChange() {\n    this.$refs.logContainer.innerText = \"\";\n    const currLogs = this.frameLogs[this.framePos];\n    if (currLogs) {\n      currLogs.forEach(arg => {\n        this.$refs.logContainer.innerText += `${arg}\\n`;\n      });\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoggingInterface.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoggingInterface.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LoggingInterface.vue?vue&type=template&id=4370d09e&scoped=true&\"\nimport script from \"./LoggingInterface.vue?vue&type=script&lang=ts&\"\nexport * from \"./LoggingInterface.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./LoggingInterface.vue?vue&type=style&index=0&id=4370d09e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4370d09e\",\n  null\n  \n)\n\nexport default component.exports","import { BlobReader } from \"./utils\";\nimport { FrameInfo, PartialFrameInfo } from \"./api/types\";\nimport { AnalysisResult, FactoryDefaultCalibration } from \"@/types\";\n\nexport interface Frame {\n  frameInfo: FrameInfo;\n  frame: Uint16Array;\n  bodyShape: Uint8Array;\n  analysisResult: AnalysisResult;\n}\n\nexport interface PartialFrame {\n  frameInfo: PartialFrameInfo;\n  frame: Uint16Array;\n}\n\nexport enum CameraConnectionState {\n  Connecting,\n  Connected,\n  Disconnected\n}\n\nconst UUID = new Date().getTime();\n\ninterface CameraStats {\n  skippedFramesServer: number;\n  skippedFramesClient: number;\n}\n\ninterface CameraState {\n  socket: WebSocket | null;\n  UUID: number;\n  stats: CameraStats;\n  prevFrameNum: number;\n  frames: PartialFrame[];\n  heartbeatInterval: number;\n  pendingFrame: number | null;\n}\n\nexport class CameraConnection {\n  constructor(\n    public host: string,\n    port: string,\n    public onFrame: (frame: PartialFrame) => void,\n    public onConnectionStateChange: (\n      connectionState: CameraConnectionState\n    ) => void\n  ) {\n    if (\n      (port === \"8080\" || port === \"5000\") &&\n      process.env.NODE_ENV === \"development\"\n    ) {\n      // If we're running in development mode, find the remote camera server\n      //this.host = \"192.168.178.21\";\n      //this.host = \"192.168.0.181\";\n      this.host = \"192.168.86.43\";\n      //this.host = \"192.168.0.82\";\n      //this.host = \"192.168.0.41\";\n    }\n    this.connect();\n  }\n  private state: CameraState = {\n    socket: null,\n    UUID: new Date().getTime(),\n    stats: {\n      skippedFramesServer: 0,\n      skippedFramesClient: 0\n    },\n    pendingFrame: null,\n    prevFrameNum: -1,\n    heartbeatInterval: 0,\n    frames: []\n  };\n\n  retryConnection(retryTime: number) {\n    if (retryTime > 0) {\n      setTimeout(() => this.retryConnection(retryTime - 1), 1000);\n    } else {\n      this.connect();\n    }\n  }\n  register() {\n    if (this.state.socket !== null) {\n      if (this.state.socket.readyState === WebSocket.OPEN) {\n        // We are waiting for frames now.\n        this.state.socket.send(\n          JSON.stringify({\n            type: \"Register\",\n            data: navigator.userAgent,\n            uuid: UUID\n          })\n        );\n        this.onConnectionStateChange(CameraConnectionState.Connected);\n\n        this.state.heartbeatInterval = (setInterval(() => {\n          this.state.socket &&\n            this.state.socket.send(\n              JSON.stringify({\n                type: \"Heartbeat\",\n                uuid: UUID\n              })\n            );\n        }, 5000) as unknown) as number;\n      } else {\n        setTimeout(this.register.bind(this), 100);\n      }\n    }\n  }\n  connect() {\n    this.state.socket = new WebSocket(`ws://${this.host}/ws`);\n    this.onConnectionStateChange(CameraConnectionState.Connecting);\n    this.state.socket.addEventListener(\"error\", e => {\n      console.warn(\"Websocket Connection error\", e);\n      //...\n    });\n    // Connection opened\n    this.state.socket.addEventListener(\"open\", this.register.bind(this));\n    this.state.socket.addEventListener(\"close\", () => {\n      // When we do reconnect, we need to treat it as a new connection\n      console.warn(\"Websocket closed\");\n      this.state.socket = null;\n      this.onConnectionStateChange(CameraConnectionState.Disconnected);\n      clearInterval(this.state.heartbeatInterval);\n      this.retryConnection(5);\n    });\n    this.state.socket.addEventListener(\"message\", async event => {\n      if (event.data instanceof Blob) {\n        // TODO(jon): Only do this if we detect that we're dropping frames?\n        const droppingFrames = false;\n        if (droppingFrames) {\n          this.state.frames.push(\n            (await this.parseFrame(event.data as Blob)) as PartialFrame\n          );\n          // Process the latest frame, after waiting half a frame delay\n          // to see if there are any more frames hot on its heels.\n          this.state.pendingFrame = (setTimeout(\n            this.useLatestFrame.bind(this),\n            1\n          ) as unknown) as number;\n        } else {\n          this.onFrame(\n            (await this.parseFrame(event.data as Blob)) as PartialFrame\n          );\n        }\n        // Every time we get a frame, set a new timeout for when we decide that the camera has stalled sending us new frames.\n      }\n    });\n  }\n  async parseFrame(\n    blob: Blob\n  ): Promise<{ frameInfo: PartialFrameInfo; frame: Uint16Array } | null> {\n    // NOTE(jon): On iOS. it seems slow to do multiple fetches from the blob, so let's do it all at once.\n    const data = await BlobReader.arrayBuffer(blob);\n    const frameInfoLength = new Uint16Array(data.slice(0, 2))[0];\n    const frameStartOffset = 2 + frameInfoLength;\n    try {\n      const frameInfo = JSON.parse(\n        String.fromCharCode(...new Uint8Array(data.slice(2, frameStartOffset)))\n      ) as PartialFrameInfo;\n\n      if (frameInfo.Calibration === null) {\n        frameInfo.Calibration = { ...FactoryDefaultCalibration };\n        frameInfo.Calibration.UuidOfUpdater = UUID;\n        frameInfo.Calibration.CalibrationBinaryVersion =\n          frameInfo.BinaryVersion;\n      }\n\n      const frameNumber = frameInfo.Telemetry.FrameCount;\n      if (frameNumber % 20 === 0) {\n        performance.clearMarks();\n        performance.clearMeasures();\n        performance.clearResourceTimings();\n      }\n      performance.mark(`start frame ${frameNumber}`);\n      if (\n        this.state.prevFrameNum !== -1 &&\n        this.state.prevFrameNum + 1 !== frameInfo.Telemetry.FrameCount\n      ) {\n        this.state.stats.skippedFramesServer +=\n          frameInfo.Telemetry.FrameCount - this.state.prevFrameNum;\n        // Work out an fps counter.\n      }\n      this.state.prevFrameNum = frameInfo.Telemetry.FrameCount;\n      const frameSizeInBytes =\n        frameInfo.Camera.ResX * frameInfo.Camera.ResY * 2;\n      // TODO(jon): Some perf optimisations here.\n      const frame = new Uint16Array(\n        data.slice(frameStartOffset, frameStartOffset + frameSizeInBytes)\n      );\n      return {\n        frameInfo,\n        frame\n      };\n    } catch (e) {\n      console.error(\"Malformed JSON payload\", e);\n    }\n    return null;\n  }\n  async useLatestFrame() {\n    if (this.state.pendingFrame) {\n      clearTimeout(this.state.pendingFrame);\n    }\n    let latestFrameTimeOnMs = 0;\n    let latestFrame: PartialFrame | null = null;\n    // Turns out that we don't always get the messages in order from the pi, so make sure we take the latest one.\n    const framesToDrop: PartialFrame[] = [];\n    while (this.state.frames.length !== 0) {\n      const frame = this.state.frames.shift() as PartialFrame;\n      const frameHeader = frame.frameInfo;\n      const timeOn = frameHeader.Telemetry.TimeOn / 1000 / 1000;\n      if (timeOn > latestFrameTimeOnMs) {\n        if (latestFrame !== null) {\n          framesToDrop.push(latestFrame);\n        }\n        latestFrameTimeOnMs = timeOn;\n        latestFrame = frame;\n      }\n    }\n    // Clear out and log any old frames that need to be dropped\n    while (framesToDrop.length !== 0) {\n      const dropFrame = framesToDrop.shift() as PartialFrame;\n      const timeOn = dropFrame.frameInfo.Telemetry.TimeOn / 1000 / 1000;\n      this.state.stats.skippedFramesClient++;\n      if (this.state.socket) {\n        (this.state.socket as WebSocket).send(\n          JSON.stringify({\n            type: \"Dropped late frame\",\n            data: `${latestFrameTimeOnMs - timeOn}ms behind current: frame#${\n              dropFrame.frameInfo.Telemetry.FrameCount\n            }`,\n            uuid: UUID\n          })\n        );\n      } else {\n        console.warn(\"Lost web socket connection\");\n      }\n    }\n\n    // Take the latest frame and process it.\n    if (latestFrame !== null) {\n      await this.onFrame(latestFrame);\n      // if (DEBUG_MODE) {\n      //   updateFpsCounter(skippedFramesServer, skippedFramesClient);\n      // } else if (fpsCount.innerText !== \"\") {\n      //   fpsCount.innerText = \"\";\n      // }\n    }\n    this.state.stats.skippedFramesClient = 0;\n    this.state.stats.skippedFramesServer = 0;\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"qr-container\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.registered)?_c('svg',{staticClass:\"qr-image registered\",attrs:{\"viewBox\":\"0,0,72,65\",\"width\":\"86.4\",\"height\":\"78\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M65 7L28 55 7 37\",\"stroke\":\"#fff\",\"stroke-width\":\"13\",\"stroke-linecap\":\"round\"}})]):_c('svg',{staticClass:\"qr-image\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0,0,1200,1200\",\"width\":150,\"height\":150,\"fill\":\"white\"}},[_c('path',{attrs:{\"d\":\"M576 96h48v48h-48zM672 96h48v48h-48zM576 144h48v48h-48zM624 144h48v48h-48zM672 144h48v48h-48zM480 192h48v48h-48zM528 192h48v48h-48zM576 192h48v48h-48zM672 192h48v48h-48zM480 240h48v48h-48zM528 240h48v48h-48zM624 240h48v48h-48zM480 288h48v48h-48zM576 288h48v48h-48zM624 288h48v48h-48zM672 288h48v48h-48zM480 336h48v48h-48zM672 336h48v48h-48zM480 384h48v48h-48zM576 384h48v48h-48zM672 384h48v48h-48zM480 432h48v48h-48zM528 432h48v48h-48zM624 432h48v48h-48zM672 432h48v48h-48zM96 480h48v48H96zM192 480h48v48h-48zM240 480h48v48h-48zM288 480h48v48h-48zM336 480h48v48h-48zM384 480h48v48h-48zM576 480h48v48h-48zM672 480h48v48h-48zM768 480h48v48h-48zM816 480h48v48h-48zM864 480h48v48h-48zM912 480h48v48h-48zM960 480h48v48h-48zM192 528h48v48h-48zM288 528h48v48h-48zM336 528h48v48h-48zM432 528h48v48h-48zM480 528h48v48h-48zM576 528h48v48h-48zM672 528h48v48h-48zM816 528h48v48h-48zM912 528h48v48h-48zM960 528h48v48h-48zM1008 528h48v48h-48zM1056 528h48v48h-48zM96 576h48v48H96zM192 576h48v48h-48zM384 576h48v48h-48zM432 576h48v48h-48zM480 576h48v48h-48zM576 576h48v48h-48zM624 576h48v48h-48zM720 576h48v48h-48zM864 576h48v48h-48zM960 576h48v48h-48zM1056 576h48v48h-48zM96 624h48v48H96zM144 624h48v48h-48zM240 624h48v48h-48zM288 624h48v48h-48zM480 624h48v48h-48zM576 624h48v48h-48zM816 624h48v48h-48zM864 624h48v48h-48zM960 624h48v48h-48zM1008 624h48v48h-48zM1056 624h48v48h-48zM96 672h48v48H96zM192 672h48v48h-48zM288 672h48v48h-48zM336 672h48v48h-48zM384 672h48v48h-48zM432 672h48v48h-48zM624 672h48v48h-48zM720 672h48v48h-48zM864 672h48v48h-48zM960 672h48v48h-48zM1008 672h48v48h-48zM480 720h48v48h-48zM528 720h48v48h-48zM576 720h48v48h-48zM624 720h48v48h-48zM672 720h48v48h-48zM720 720h48v48h-48zM768 720h48v48h-48zM912 720h48v48h-48zM528 768h48v48h-48zM576 768h48v48h-48zM672 768h48v48h-48zM768 768h48v48h-48zM816 768h48v48h-48zM480 816h48v48h-48zM528 816h48v48h-48zM624 816h48v48h-48zM672 816h48v48h-48zM720 816h48v48h-48zM768 816h48v48h-48zM912 816h48v48h-48zM1008 816h48v48h-48zM480 864h48v48h-48zM672 864h48v48h-48zM816 864h48v48h-48zM960 864h48v48h-48zM480 912h48v48h-48zM528 912h48v48h-48zM576 912h48v48h-48zM672 912h48v48h-48zM816 912h48v48h-48zM960 912h48v48h-48zM480 960h48v48h-48zM528 960h48v48h-48zM576 960h48v48h-48zM624 960h48v48h-48zM720 960h48v48h-48zM864 960h48v48h-48zM912 960h48v48h-48zM960 960h48v48h-48zM816 1008h48v48h-48zM864 1008h48v48h-48zM960 1008h48v48h-48zM1008 1008h48v48h-48zM480 1056h48v48h-48zM576 1056h48v48h-48zM624 1056h48v48h-48zM720 1056h48v48h-48zM864 1056h48v48h-48zM912 1056h48v48h-48zM960 1056h48v48h-48z\"}}),_c('path',{attrs:{\"fill\":\"none\",\"d\":\"M146 146h236v236H146z\"}}),_c('path',{attrs:{\"d\":\"M382 96H96v336h336V96h-50zm0 286H146V146h236v236z\"}}),_c('path',{attrs:{\"fill\":\"none\",\"d\":\"M818 146h236v236H818z\"}}),_c('path',{attrs:{\"d\":\"M1054 96H768v336h336V96h-50zm0 286H818V146h236v236z\"}}),_c('path',{attrs:{\"fill\":\"none\",\"d\":\"M146 818h236v236H146z\"}}),_c('path',{attrs:{\"d\":\"M382 768H96v336h336V768h-50zm0 286H146V818h236v236z\"}}),_c('g',[_c('path',{attrs:{\"d\":\"M192 192h144v144H192z\"}})]),_c('g',[_c('path',{attrs:{\"d\":\"M864 192h144v144H864z\"}})]),_c('g',[_c('path',{attrs:{\"d\":\"M192 864h144v144H192z\"}})])])]),_c('p',{staticClass:\"qr-text\"},[_vm._v(_vm._s(_vm.qrMessage))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Prop, Component } from \"vue-property-decorator\";\nimport {QrState} from \"@/types\"\n\n@Component\nexport default class QRImage extends Vue {\n  @Prop({ required: true }) qrState!: QrState;\n  get qrMessage(): string {\n    switch (this.qrState) {\n      case QrState.Valid:\n        return \"Registered\";\n      case QrState.Invalid:\n        return \"Invalid ID Try Again\";\n      case QrState.Unregistered:\n        return \"Present ID to register\";\n    }\n    return \"Present ID to register\"\n  }\n  get registered() {\n    return this.qrState === QrState.Valid;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QRImage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QRImage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./QRImage.vue?vue&type=template&id=4ee8b2bc&\"\nimport script from \"./QRImage.vue?vue&type=script&lang=ts&\"\nexport * from \"./QRImage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./QRImage.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video-container\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('video',{ref:\"videoStream\",staticClass:\"video-canvas\",class:{\n        'stream-loaded': _vm.streamLoaded,\n        'stream-not-loaded': !_vm.streamLoaded\n      },attrs:{\"autoplay\":\"\"},domProps:{\"srcObject\":_vm.stream}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from \"vue-property-decorator\";\nimport QrScanner from \"qr-scanner\";\n\nQrScanner.WORKER_PATH = \"../qr-scanner-worker.min.js\";\n\n@Component\nexport default class QRVideo extends Vue {\n  @Prop({ required: true }) setQRCode!: (code: string | null) => void;\n  @Prop({ required: true }) startScanning!: boolean;\n  stream = {} as MediaStream;\n  timeQRFound = 0;\n  streamLoaded = false;\n  qrScanner: QrScanner | undefined = undefined;\n\n  $refs!: {\n    videoStream: HTMLVideoElement;\n    videoCanvas: HTMLCanvasElement;\n  };\n  async mounted() {\n    try {\n      this.$refs.videoStream.oncanplay = () => {\n        this.streamLoaded = true;\n      };\n      const camera = await QrScanner.listCameras(true);\n      this.qrScanner = new QrScanner(\n        this.$refs.videoStream,\n        (result) => {\n          this.setQRCode(result);\n        },\n        undefined,\n        (video: HTMLVideoElement) => ({x: 0, y: 0, width: video.width, height: video.height}),\n        camera[0].id\n      );\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  destroy() {\n    if (this.qrScanner) {\n      this.streamLoaded = false;\n      this.qrScanner.destroy();\n    }\n  }\n\n  @Watch(\"startScanning\")\n  runScan() {\n    if(this.startScanning) {\n      this.qrScanner?.start();\n    } else {\n      this.streamLoaded = false;\n      setTimeout(() => {\n        this.qrScanner?.stop();\n      }, 500)\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QRCameraFeed.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QRCameraFeed.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./QRCameraFeed.vue?vue&type=template&id=085cdd7e&scoped=true&\"\nimport script from \"./QRCameraFeed.vue?vue&type=script&lang=ts&\"\nexport * from \"./QRCameraFeed.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./QRCameraFeed.vue?vue&type=style&index=0&id=085cdd7e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"085cdd7e\",\n  null\n  \n)\n\nexport default component.exports","import { ObservableDeviceApi as DeviceApi } from \"@/main\";\nimport { Frame } from \"@/camera\";\nimport { ScreeningState } from \"@/types\";\n\nfunction FrameHandler() {\n  const secondsToMilliseconds = (seconds: number) => seconds * 1000;\n  const isDeviceRecording = () =>\n    DeviceApi.recorderStatus().then(({ recording }) => recording);\n  return {\n    startTimeInFrame: 0,\n    startTimeOutFrame: 0,\n    isRecording: isDeviceRecording(),\n    hasMeasured: false,\n    async process(frame: Frame) {\n      const timeInFrame = this.getTimeInFrame(frame);\n      const { hasExit, isInFrame } = this.isObjectStillInFrame(frame);\n      this.measuredInFrame(frame);\n      if (isInFrame && !this.isRecording) {\n        await DeviceApi.startRecording();\n        this.isRecording = await isDeviceRecording();\n      } else if (hasExit && this.isRecording) {\n        const shouldRecord =\n          timeInFrame > secondsToMilliseconds(8) ||\n          (this.hasMeasured && timeInFrame > secondsToMilliseconds(1));\n        this.hasMeasured = false;\n        await DeviceApi.stopRecording(shouldRecord);\n        this.isRecording = await isDeviceRecording();\n      }\n    },\n    measuredInFrame(frame: Frame) {\n      const state = frame.analysisResult.nextState;\n      this.hasMeasured =\n        state === ScreeningState.MEASURED ? true : this.hasMeasured;\n    },\n    isObjectInFrame(frame: Frame): boolean {\n      const state = frame.analysisResult.nextState;\n      return [\n        ScreeningState.HEAD_LOCK,\n        ScreeningState.LARGE_BODY,\n        ScreeningState.FRONTAL_LOCK,\n        ScreeningState.STABLE_LOCK,\n        ScreeningState.MULTIPLE_HEADS,\n        ScreeningState.MEASURED,\n        ScreeningState.TOO_FAR\n      ].includes(state);\n    },\n    hasObjectExitFrame(frame: Frame): boolean {\n      const isInFrame = this.isObjectInFrame(frame);\n      const ThresholdSeconds = secondsToMilliseconds(3);\n      const now = Date.now();\n      this.startTimeOutFrame = isInFrame ? now : this.startTimeOutFrame;\n      const currTimeOutFrame = Math.abs(now - this.startTimeOutFrame);\n      const hasExit = currTimeOutFrame > ThresholdSeconds;\n      this.startTimeOutFrame = hasExit ? Infinity : this.startTimeOutFrame;\n\n      return hasExit;\n    },\n    // Even if doesn't detect object is in a frame does not mean it has left.\n    isObjectStillInFrame(\n      frame: Frame\n    ): { isInFrame: boolean; hasExit: boolean } {\n      const isInFrame = this.isObjectInFrame(frame);\n      const hasExit = this.hasObjectExitFrame(frame);\n      return { isInFrame, hasExit };\n    },\n    getTimeInFrame(frame: Frame): number {\n      const now = Date.now();\n      const { isInFrame, hasExit } = this.isObjectStillInFrame(frame);\n      if (isInFrame) {\n        this.startTimeInFrame =\n          this.startTimeInFrame === 0 ? now : this.startTimeInFrame;\n        return now - this.startTimeInFrame;\n      } else if (this.startTimeInFrame === 0) {\n        return 0;\n      } else if (hasExit) {\n        // Object has yet to enter frame\n        const totalTimeInFrame = now - this.startTimeInFrame;\n        this.startTimeInFrame = 0;\n        return totalTimeInFrame;\n      } else {\n        return now - this.startTimeInFrame;\n      }\n    }\n  };\n}\n\nexport default FrameHandler;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport UserFacingScreening from \"@/components/UserFacingScreening.vue\";\nimport LoggingInterface from \"@/components/LoggingInterface.vue\";\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { CameraConnectionState, Frame } from \"@/camera\";\nimport FrameListenerWorker from \"worker-loader!./frame-listener\";\nimport { FrameInfo } from \"@/api/types\";\nimport {\n  ExternalDeviceSettingsApi as DeviceSettings,\n  ScreeningApi\n} from \"@/api/api\";\nimport {\n  AppState,\n  CalibrationInfo,\n  FaceInfo,\n  FactoryDefaultCalibration,\n  ScreeningEvent,\n  ScreeningState,\n  ThermalReference,\n  QrState\n} from \"@/types\";\nimport { checkForSoftwareUpdates, DegreesCelsius } from \"@/utils\";\nimport {\n  FFC_SAFETY_DURATION_SECONDS,\n  FFC_MAX_INTERVAL_MS,\n  LerpAmount,\n  State,\n  ObservableDeviceApi as DeviceApi,\n  WARMUP_TIME_SECONDS\n} from \"@/main\";\nimport VideoStream from \"@/components/VideoStream.vue\";\nimport QRImage from \"@/components/QRImage.vue\";\nimport QRVideo from \"@/components/QRCameraFeed.vue\";\nimport { FrameMessage } from \"@/frame-listener\";\nimport { ImmutableShape } from \"@/geom\";\nimport FrameHandler from \"@/frame-handler\";\nimport QrScanner from \"qr-scanner\";\n\n@Component({\n  components: {\n    UserFacingScreening,\n    VideoStream,\n    QRVideo,\n    QRImage,\n    LoggingInterface\n  }\n})\nexport default class App extends Vue {\n  private deviceID = \"\";\n  private deviceName = \"\";\n  private piSerial = \"\";\n  private appVersion = \"\";\n\n  private appState: AppState = State;\n  private isNotFullscreen = true;\n  private showUpdatedCalibrationSnackbar = false;\n  private frameHandler = FrameHandler();\n  private frameListener = new Worker(\n    new URL(\"./frame-listener.ts\", import.meta.url)\n  );\n\n  private showSoftwareVersionUpdatedPrompt = false;\n  private useLiveCamera = true;\n  private gotFirstFrame = false;\n\n  // CPTV Player\n  cptvStartFrame = 0;\n  cptvEndFrame = 0;\n\n  get isReferenceDevice(): boolean {\n    return (\n      window.navigator.userAgent.includes(\"Lenovo TB-X605LC\") ||\n      this.isRunningInAndroidWebview\n    );\n  }\n\n  get face(): FaceInfo | null {\n    return this.appState.currentFrame?.analysisResult.face || null;\n  }\n\n  get finishScan(): boolean {\n    return this.appState.currentScreeningState === ScreeningState.MEASURED;\n  }\n\n  get qrMode(): boolean {\n    return DeviceApi.RegisterQRID;\n  }\n\n  get isRunningInAndroidWebview(): boolean {\n    return window.navigator.userAgent === \"feverscreen-app\";\n  }\n\n  get isFakeReferenceDevice(): boolean {\n    return window.navigator.userAgent.includes(\"Fake\");\n  }\n\n  async enableFullscreen() {\n    try {\n      await document.body.requestFullscreen();\n      this.isNotFullscreen = false;\n    } catch (e) {\n      return;\n    }\n  }\n\n  private qrCode: string | null = null;\n\n  private startTimeInFrame = 0;\n  private startTimeOutFrame = Infinity;\n  private isRecording = false;\n  private skippedWarmup = false;\n  private thermalRefSide: \"left\" | \"right\" = \"left\";\n  private prevShape: ImmutableShape[] = [];\n  private nextShape: ImmutableShape[] = [];\n\n  $refs!: {\n    debugCanvas: HTMLCanvasElement;\n  };\n\n  private skipWarmup() {\n    this.skippedWarmup = true;\n  }\n\n  public get currentFrameCount(): number {\n    // NOTE(jon): This is always zero if it's the fake thermal camera.\n    if ((this.appState.currentFrame as Frame).frameInfo) {\n      return (this.appState.currentFrame as Frame).frameInfo.Telemetry\n        .FrameCount;\n    }\n    return 0;\n  }\n\n  public setQRCode(code: string | null) {\n    this.qrCode = code;\n  }\n\n  get qrState() {\n    if (this.qrCode !== null) {\n      return this.isValidQR() ? QrState.Valid : QrState.Invalid;\n    } else {\n      return QrState.Unregistered;\n    }\n  }\n\n  isValidQR() {\n    if (this.qrCode) {\n      return this.qrCode.slice(0, 4) === \"tko-\";\n    } else {\n      return false;\n    }\n  }\n\n  get registered() {\n    return this.qrState === QrState.Valid;\n  }\n\n  updateCalibration(nextCalibration: CalibrationInfo, firstLoad = false) {\n    if (!firstLoad && this.appState.uuid !== nextCalibration.UuidOfUpdater) {\n      this.showUpdatedCalibrationSnackbar = true;\n      setTimeout(() => {\n        this.showUpdatedCalibrationSnackbar = false;\n      }, 3000);\n    }\n    this.appState.currentCalibration.thermalRefTemperature = new DegreesCelsius(\n      nextCalibration.ThermalRefTemp\n    );\n    this.appState.currentCalibration.calibrationTemperature = new DegreesCelsius(\n      nextCalibration.TemperatureCelsius\n    );\n    this.appState.currentCalibration.thresholdMinFever =\n      nextCalibration.ThresholdMinFever;\n    this.appState.currentCalibration.head = {\n      tL: { x: nextCalibration.HeadTLX, y: nextCalibration.HeadTLY },\n      tR: { x: nextCalibration.HeadTRX, y: nextCalibration.HeadTRY },\n      bL: { x: nextCalibration.HeadBLX, y: nextCalibration.HeadBLY },\n      bR: { x: nextCalibration.HeadBRX, y: nextCalibration.HeadBRY }\n    };\n    this.appState.currentCalibration.playNormalSound =\n      nextCalibration.UseNormalSound;\n    this.appState.currentCalibration.playWarningSound =\n      nextCalibration.UseWarningSound;\n    this.appState.currentCalibration.playErrorSound =\n      nextCalibration.UseErrorSound;\n  }\n\n  get currentFrame(): Frame {\n    return this.appState.currentFrame as Frame;\n  }\n\n  get timeOnInSeconds(): number {\n    const telemetry = this.frameInfo?.Telemetry;\n    if (telemetry) {\n      let timeOnSecs;\n      // NOTE: TimeOn is in nanoseconds when coming from the camera server,\n      //  but in milliseconds when coming from a CPTV file - should make these the same.\n      if (this.useLiveCamera) {\n        timeOnSecs = telemetry.TimeOn / 1000 / 1000 / 1000;\n      } else {\n        timeOnSecs = telemetry.TimeOn / 1000;\n      }\n      return timeOnSecs;\n    }\n    return WARMUP_TIME_SECONDS;\n  }\n\n  get isWarmingUp(): boolean {\n    return (\n      !this.skippedWarmup &&\n      this.timeOnInSeconds < WARMUP_TIME_SECONDS &&\n      this.timeOnInSeconds !== 0\n    );\n  }\n\n  get remainingWarmupTime(): number {\n    if (this.skippedWarmup) {\n      return 0;\n    }\n    return Math.max(0, WARMUP_TIME_SECONDS - this.timeOnInSeconds);\n  }\n\n  get isDuringFFCEvent(): boolean {\n    const telemetry = this.frameInfo?.Telemetry;\n    if (!this.isWarmingUp && telemetry) {\n      // TODO(jon): This needs to change based on whether camera is live or not\n      return (\n        (telemetry.TimeOn - telemetry.LastFFCTime) / 1000 <\n        FFC_SAFETY_DURATION_SECONDS\n      );\n    }\n    return false;\n  }\n\n  get isGettingFrames(): boolean {\n    // Did we receive any frames in the past second?  // Did we just trigger an FFC event?\n    return this.appState.lastFrameTime > new Date().getTime() - 1000;\n  }\n\n  get isNotGettingFrames(): boolean {\n    // Did we receive any frames in the past second?\n    return !(this.appState.lastFrameTime > new Date().getTime() - 1000);\n  }\n\n  get isConnected(): boolean {\n    return (\n      this.appState.cameraConnectionState === CameraConnectionState.Connected\n    );\n  }\n\n  get isConnecting(): boolean {\n    return (\n      this.appState.cameraConnectionState === CameraConnectionState.Connecting\n    );\n  }\n\n  private updateBodyOutline(body: Uint8Array) {\n    this.prevShape = this.nextShape;\n    const shape = [];\n    for (let i = 0; i < body.length; i += 3) {\n      const y = body[i];\n      const x0 = body[i + 1];\n      const x1 = body[i + 2];\n      shape.push({ x0, x1, y });\n    }\n    LerpAmount.amount = 0.0;\n    if (shape.length) {\n      this.nextShape = [Object.freeze(shape)];\n    } else {\n      this.nextShape = [];\n    }\n  }\n\n  private checkForSoftwareUpdatesThisFrame(frame: Frame) {\n    const newLine = frame.frameInfo.AppVersion.indexOf(\"\\n\");\n    if (newLine !== -1) {\n      frame.frameInfo.AppVersion = frame.frameInfo.AppVersion.substring(\n        0,\n        newLine\n      );\n    }\n    // Did the software get updated?\n    checkForSoftwareUpdates(\n      frame.frameInfo.BinaryVersion,\n      frame.frameInfo.AppVersion,\n      this.gotFirstFrame\n    );\n  }\n\n  private checkForCalibrationUpdatesThisFrame(frame: Frame) {\n    if (this.frameInfo) {\n      const prevCalibration = JSON.stringify(this.frameInfo.Calibration);\n      const nextCalibration = JSON.stringify(frame.frameInfo.Calibration);\n      if (prevCalibration !== nextCalibration) {\n        this.updateCalibration(frame.frameInfo.Calibration);\n      }\n    }\n  }\n\n  private async onFrame(frame: Frame) {\n    this.checkForSoftwareUpdatesThisFrame(frame);\n    this.checkForCalibrationUpdatesThisFrame(frame);\n    this.updateBodyOutline(frame.bodyShape);\n    this.appState.lastFrameTime = new Date().getTime();\n\n    const prevScreeningState = this.appState.currentScreeningState;\n    const nextScreeningState = frame.analysisResult.nextState;\n    this.appState.currentFrame = frame;\n\n    if (DeviceApi.RecordUserActivity) {\n      this.frameHandler.process(frame);\n    }\n\n    if (frame.analysisResult.thermalRef.geom.center.x < 60) {\n      this.thermalRefSide = \"left\";\n    } else {\n      this.thermalRefSide = \"right\";\n    }\n\n    if (this.isWarmingUp) {\n      this.appState.currentScreeningState = ScreeningState.WARMING_UP;\n    } else {\n      // See if we want to pre-emptively trigger an FFC:\n      let msSinceLastFFC =\n        frame.frameInfo.Telemetry.TimeOn -\n        frame.frameInfo.Telemetry.LastFFCTime;\n      if (this.useLiveCamera) {\n        // Nanoseconds rather than milliseconds if live\n        msSinceLastFFC = msSinceLastFFC / 1000 / 1000;\n      }\n\n      const timeTillFFC = FFC_MAX_INTERVAL_MS - msSinceLastFFC;\n\n      if (\n        prevScreeningState === ScreeningState.STABLE_LOCK &&\n        nextScreeningState === ScreeningState.MEASURED\n      ) {\n        const face = frame.analysisResult.face;\n        const thermalRef = frame.analysisResult.thermalRef;\n        this.snapshotScreeningEvent(thermalRef, face, frame, {\n          ...face.samplePoint,\n          v: face.sampleValue,\n          t: face.sampleTemp\n        });\n      } else if (\n        prevScreeningState === ScreeningState.MEASURED &&\n        nextScreeningState === ScreeningState.READY\n      ) {\n        if (this.isReferenceDevice) {\n          if (timeTillFFC < 30 * 1000) {\n            // Someone just left the frame, and we need to do an FFC in the next 30 seconds,\n            // so now is a great time to do it early and hide it from the user.\n            this.runFFC();\n          }\n          const qr = this.isValidQR() ? this.qrCode : null;\n          ScreeningApi.recordScreeningEvent(\n            this.deviceID,\n            this.piSerial,\n            this.appState.currentScreeningEvent as ScreeningEvent,\n            this.appState.currentCalibration.thresholdMinFever,\n            qr\n          );\n          this.qrCode = null;\n        }\n\n        this.appState.currentScreeningEvent = null;\n      } else if (this.isReferenceDevice && timeTillFFC < 30 * 1000) {\n        // Someone just entered the frame, but we need to do an FFC in the next 30 seconds,\n        // so do it as soon as they have entered and make them wait then, rather than in the middle of trying to\n        // screen them.\n        this.runFFC();\n      }\n      this.appState.currentScreeningState = nextScreeningState;\n      if (nextScreeningState !== ScreeningState.MEASURED) {\n        this.setQRCode(null);\n      }\n    }\n  }\n\n  attemptingFFC = false;\n  runningFFC = false;\n\n  runFFC() {\n    if (!this.attemptingFFC) {\n      this.attemptingFFC = true;\n      let readyCount = 0;\n      const checkCanFFC = setInterval(() => {\n        if (this.appState.currentScreeningState === ScreeningState.READY) {\n          readyCount += 1;\n        } else {\n          readyCount = 0;\n        }\n        if (readyCount === 12) {\n          this.attemptingFFC = false;\n          this.appState.currentScreeningState = ScreeningState.AFTER_FFC_EVENT;\n          this.runningFFC = true;\n          DeviceApi.runFFC();\n          setTimeout(() => {\n            this.runningFFC = false;\n          }, 5000)\n          clearInterval(checkCanFFC);\n        }\n      }, 300);\n    }\n  }\n\n  get frameInfo(): FrameInfo | undefined {\n    return this.appState.currentFrame?.frameInfo;\n  }\n\n  snapshotScreeningEvent(\n    thermalReference: ThermalReference,\n    face: FaceInfo,\n    frame: Frame,\n    sample: { x: number; y: number; v: number; t: number }\n  ) {\n    this.appState.currentScreeningEvent = {\n      rawTemperatureValue: sample.v,\n      calculatedValue: sample.t,\n      sampleX: sample.x,\n      sampleY: sample.y,\n      frame, // Really, we should be able to recreate the temperature value just from the frame + telemetry?\n      timestamp: new Date(),\n      thermalReference,\n      face\n    };\n    return;\n  }\n\n  onConnectionStateChange(connection: CameraConnectionState) {\n    this.appState.cameraConnectionState = connection;\n  }\n\n  private async checkForSettingsChanges(deviceID: string) {\n    const device = await DeviceSettings.getDevice(deviceID)\n    if (device !== undefined) {\n      const enableRecording = device.recordUserActivity[\"BOOL\"];\n      const hasCamera = await QrScanner.hasCamera();\n      DeviceApi.RegisterQRID = hasCamera ? device.qrMode?.[\"BOOL\"] ?? false : false;\n      DeviceApi.RecordUserActivity = enableRecording;\n      DeviceApi.DisableRecordUserActivity = !enableRecording;\n    } else {\n      DeviceApi.DisableRecordUserActivity = false;\n      DeviceApi.RecordUserActivity =\n        window.localStorage.getItem(\"recordUserActivity\") === \"false\"\n          ? false\n          : true;\n    }\n  }\n\n  async mounted() {\n    let cptvFilename = \"/cptv-files/0.7.5beta recording-1 2708.cptv\";\n    //let cptvFilename = \"/cptv-files/bunch of people in small meeting room 20200812.134427.735.cptv\";\n    const uri = window.location.search.substring(1);\n    const params = new URLSearchParams(uri);\n    if (params.get(\"cptvfile\")) {\n      cptvFilename = `/cptv-files/${params.get(\"cptvfile\")}.cptv`;\n      this.useLiveCamera = false;\n    }\n\n    // Update the AppState:\n    if (this.useLiveCamera) {\n      this.appState.uuid = new Date().getTime();\n      await DeviceApi.stopRecording(false);\n      DeviceApi.getCalibration().then(existingCalibration => {\n        if (existingCalibration === null) {\n          existingCalibration = { ...FactoryDefaultCalibration };\n        }\n        this.updateCalibration(existingCalibration, true);\n        DeviceApi.softwareVersion().then(({ appVersion, binaryVersion }) => {\n          DeviceApi.deviceInfo().then(({ deviceID, devicename, serial }) => {\n            this.deviceID = deviceID;\n            this.deviceName = devicename;\n            this.piSerial = serial;\n            const newLine = appVersion.indexOf(\"\\n\");\n            let newAppVersion = appVersion;\n            this.checkForSettingsChanges(deviceID);\n            setInterval(() => {\n              this.checkForSettingsChanges(deviceID);\n            }, 1000 * 60 * 30); // Every 30 Minutes\n            if (newLine !== -1) {\n              newAppVersion = newAppVersion.substring(0, newLine);\n            }\n            this.appVersion = newAppVersion;\n            if (\n              checkForSoftwareUpdates(\n                binaryVersion,\n                newAppVersion,\n                this.gotFirstFrame\n              )\n            ) {\n              this.showSoftwareVersionUpdatedPrompt = true;\n            }\n          });\n        });\n      });\n      const network = await DeviceApi.networkInfo();\n      this.hostname =\n        network.Interfaces.find(\n          val =>\n            val.Name === (this.isReferenceDevice ? \"usb0\" : \"eth0\") &&\n            val.IPAddresses !== null\n        )\n          ?.IPAddresses?.[0].split(\"/\")[0]\n          .replace(/\\s/g, \"\") ?? window.location.hostname;\n    }\n    this.frameListener.onmessage = message => {\n      const frameMessage = message.data as FrameMessage;\n      const frame = frameMessage.payload as Frame;\n      const info = frameMessage.payload as string[];\n      switch (frameMessage.type) {\n        case \"gotFrame\":\n          if (\n            frame.frameInfo.Telemetry.FrameCount === 0 &&\n            this.gotFirstFrame\n          ) {\n            this.cptvEndFrame = this.frames.length;\n            this.playLoadedCptv();\n            this.frameListener.terminate();\n          } else {\n            this.gotFirstFrame = true;\n            if (!this.isReferenceDevice) {\n              this.frames.push(frame);\n            }\n            if (!this.runningFFC) {\n              this.onFrame(frame);\n            }\n          }\n          break;\n        case \"connectionStateChange\":\n          this.onConnectionStateChange(\n            frameMessage.payload as CameraConnectionState\n          );\n          break;\n        case \"info\":\n          if (this.frameLogs[this.frames.length]) {\n            this.frameLogs[this.frames.length].push(\n              ...(frameMessage.payload as string[])\n            );\n          } else {\n            this.frameLogs.push(frameMessage.payload as string[]);\n          }\n      }\n    };\n    const startCamInterval = setInterval(() => {\n      if (this.isGettingFrames) {\n        clearInterval(startCamInterval);\n      }\n      this.frameListener.postMessage({\n        useLiveCamera: this.useLiveCamera,\n        hostname: this.hostname,\n        port: window.location.port,\n        cptvFileToPlayback: cptvFilename\n      });\n    }, 1000);\n  }\n\n  frameLogs: string[][] = [];\n  startLoad = true;\n  frames: Frame[] = [];\n  framePos = 0;\n  rangeFrames = [0, 100];\n  paused = false;\n  get currFramePos() {\n    return this.framePos;\n  }\n  get minFrame() {\n    return Math.floor(this.frames.length * (this.rangeFrames[0] / 100));\n  }\n  get maxFrame() {\n    return Math.ceil(this.frames.length * (this.rangeFrames[1] / 100));\n  }\n  incrementFramePos() {\n    this.framePos += 1;\n    this.framePos = this.framePos % this.maxFrame;\n    if (this.framePos === 0 || this.framePos < this.minFrame) {\n      this.framePos = this.minFrame;\n    }\n  }\n  playLoadedCptv() {\n    setInterval(() => {\n      if (!this.paused) {\n        this.incrementFramePos();\n        this.onFrame(this.frames[this.framePos]);\n      }\n    }, 1000 / 9);\n  }\n  hostname = \"\";\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-40[0].rules[0].use[3]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5fa563ae&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VRangeSlider } from 'vuetify/lib/components/VRangeSlider';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\ninstallComponents(component, {VApp,VBtn,VCard,VCardActions,VCardTitle,VDialog,VOverlay,VRangeSlider,VRow,VSnackbar})\n","import Vue from \"vue\";\nimport Vuetify from \"vuetify/lib\";\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  icons: {\n    iconfont: \"mdiSvg\"\n  }\n});\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport vuetify from \"./plugins/vuetify\";\nimport { AppState, DEFAULT_THRESHOLD_MIN_FEVER, ScreeningState } from \"@/types\";\nimport { CameraConnectionState } from \"@/camera\";\nimport { DegreesCelsius } from \"@/utils\";\nimport { DeviceApi } from \"@/api/api\";\n\nVue.config.productionTip = false;\nexport const WARMUP_TIME_SECONDS = 60 * 20; // 3 mins\nexport const FFC_SAFETY_DURATION_SECONDS = 5;\nexport const FFC_MAX_INTERVAL_MS = 1000 * 60 * 10; // 10 mins\n\n// A global that stores the current interpolation state - can probably become part of the vue components.\nexport const LerpAmount = { amount: 0 };\nexport const State: AppState = {\n  currentFrame: null,\n  cameraConnectionState: CameraConnectionState.Disconnected,\n  face: null,\n  paused: false,\n  currentCalibration: {\n    calibrationTemperature: new DegreesCelsius(36),\n    thermalReferenceRawValue: 30000,\n    hotspotRawTemperatureValue: 31000,\n    timestamp: new Date(),\n    head: {\n      tL: { x: 0, y: 0 },\n      tR: { x: 0, y: 0 },\n      bL: { x: 0, y: 0 },\n      bR: { x: 0, y: 0 }\n    },\n    thresholdMinFever: DEFAULT_THRESHOLD_MIN_FEVER,\n    thermalRefTemperature: new DegreesCelsius(0),\n    playErrorSound: true,\n    playNormalSound: true,\n    playWarningSound: true\n  },\n  currentScreeningEvent: null,\n  currentScreeningState: ScreeningState.INIT,\n  currentScreeningStateFrameCount: -1,\n  lastFrameTime: 0,\n  uuid: 0,\n  analysisResult: {\n    thresholdSum: 0,\n    motionThresholdSum: 0,\n    heatStats: {\n      max: 0,\n      min: 0,\n      threshold: 0\n    },\n    face: {\n      isValid: false,\n      headLock: 0,\n      halfwayRatio: 0.0,\n      samplePoint: { x: 0, y: 0 },\n      sampleValue: 0,\n      sampleTemp: 0,\n      head: {\n        topLeft: { x: 0, y: 0 },\n        topRight: { x: 0, y: 0 },\n        bottomLeft: { x: 0, y: 0 },\n        bottomRight: { x: 0, y: 0 }\n      }\n    },\n    thermalRef: {\n      geom: {\n        center: {\n          x: 0,\n          y: 0\n        },\n        radius: 0\n      },\n      val: 0,\n      temp: 0\n    },\n    hasBody: false,\n    nextState: ScreeningState.INIT,\n    motionSum: 0,\n    frameBottomSum: 0\n  }\n};\n\nexport const ObservableDeviceApi = Vue.observable(DeviceApi);\n\n/*\n//these are the *lowest* temperature in celsius for each category\nlet GThreshold_error = 42.5;\nlet GThreshold_fever = 37.8;\nlet GThreshold_check = 37.4;\nlet GThreshold_normal = 35.7;\n */\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"352\":\"a7ab1c51\",\"641\":\"775b6dd3\"}[chunkId] + \".js\";\n};","// This function allow to reference all chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"css/\" + \"chunk-vendors\" + \".\" + \"d9ee0f11\" + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"frontend:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/static/dist/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkfrontend\"] = globalThis[\"webpackChunkfrontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// object to store loaded and loading wasm modules\nvar installedWasmModules = {};\n\nfunction promiseResolve() { return Promise.resolve(); }\n\nvar wasmImportedFuncCache0;\nvar wasmImportedFuncCache1;\nvar wasmImportedFuncCache2;\nvar wasmImportedFuncCache3;\nvar wasmImportedFuncCache4;\nvar wasmImportObjects = {\n\t9534: function() {\n\t\treturn {\n\t\t\t\"./curve_fitting_bg.js\": {\n\t\t\t\t\"__wbindgen_number_new\": function(p0f64) {\n\t\t\t\t\tif(wasmImportedFuncCache0 === undefined) wasmImportedFuncCache0 = __webpack_require__.c[476].exports;\n\t\t\t\t\treturn wasmImportedFuncCache0[\"pT\"](p0f64);\n\t\t\t\t},\n\t\t\t\t\"__wbindgen_object_drop_ref\": function(p0i32) {\n\t\t\t\t\tif(wasmImportedFuncCache1 === undefined) wasmImportedFuncCache1 = __webpack_require__.c[476].exports;\n\t\t\t\t\treturn wasmImportedFuncCache1[\"ug\"](p0i32);\n\t\t\t\t},\n\t\t\t\t\"__wbg_new_6b6f346b4912cdae\": function() {\n\t\t\t\t\tif(wasmImportedFuncCache2 === undefined) wasmImportedFuncCache2 = __webpack_require__.c[476].exports;\n\t\t\t\t\treturn wasmImportedFuncCache2[\"w_\"]();\n\t\t\t\t},\n\t\t\t\t\"__wbg_push_f353108e20ec67a0\": function(p0i32,p1i32) {\n\t\t\t\t\tif(wasmImportedFuncCache3 === undefined) wasmImportedFuncCache3 = __webpack_require__.c[476].exports;\n\t\t\t\t\treturn wasmImportedFuncCache3[\"TJ\"](p0i32,p1i32);\n\t\t\t\t},\n\t\t\t\t\"__wbindgen_throw\": function(p0i32,p1i32) {\n\t\t\t\t\tif(wasmImportedFuncCache4 === undefined) wasmImportedFuncCache4 = __webpack_require__.c[476].exports;\n\t\t\t\t\treturn wasmImportedFuncCache4[\"Or\"](p0i32,p1i32);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n};\n\nvar wasmModuleMap = {\n\t\"641\": [\n\t\t9534\n\t]\n};\n\n// object with all WebAssembly.instance exports\n__webpack_require__.w = {};\n\n// Fetch + compile chunk loading for webassembly\n__webpack_require__.f.wasm = function(chunkId, promises) {\n\n\tvar wasmModules = wasmModuleMap[chunkId] || [];\n\n\twasmModules.forEach(function(wasmModuleId, idx) {\n\t\tvar installedWasmModuleData = installedWasmModules[wasmModuleId];\n\n\t\t// a Promise means \"currently loading\" or \"already loaded\".\n\t\tif(installedWasmModuleData)\n\t\t\tpromises.push(installedWasmModuleData);\n\t\telse {\n\t\t\tvar importObject = wasmImportObjects[wasmModuleId]();\n\t\t\tvar req = fetch(__webpack_require__.p + \"\" + {\"641\":{\"9534\":\"e3f7296217571fdd8bb8\"}}[chunkId][wasmModuleId] + \".module.wasm\");\n\t\t\tvar promise;\n\t\t\tif(importObject && typeof importObject.then === 'function' && typeof WebAssembly.compileStreaming === 'function') {\n\t\t\t\tpromise = Promise.all([WebAssembly.compileStreaming(req), importObject]).then(function(items) {\n\t\t\t\t\treturn WebAssembly.instantiate(items[0], items[1]);\n\t\t\t\t});\n\t\t\t} else if(typeof WebAssembly.instantiateStreaming === 'function') {\n\t\t\t\tpromise = WebAssembly.instantiateStreaming(req, importObject);\n\t\t\t} else {\n\t\t\t\tvar bytesPromise = req.then(function(x) { return x.arrayBuffer(); });\n\t\t\t\tpromise = bytesPromise.then(function(bytes) {\n\t\t\t\t\treturn WebAssembly.instantiate(bytes, importObject);\n\t\t\t\t});\n\t\t\t}\n\t\t\tpromises.push(installedWasmModules[wasmModuleId] = promise.then(function(res) {\n\t\t\t\treturn __webpack_require__.w[wasmModuleId] = (res.instance || res).exports;\n\t\t\t}));\n\t\t}\n\t});\n};","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], () => (__webpack_require__(2300)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["QrState","render","_vm","this","_h","$createElement","_c","_self","attrs","on","skipWarmup","isReferenceDevice","appState","currentScreeningState","currentScreeningEvent","currentCalibration","face","remainingWarmupTime","prevShape","nextShape","useLiveCamera","thermalRefSide","qrMode","finishScan","registered","model","value","callback","$$v","showSoftwareVersionUpdatedPrompt","expression","_v","_s","appVersion","e","isNotGettingFrames","showUpdatedCalibrationSnackbar","setQRCode","qrState","_e","staticClass","currentFrame","frame","analysisResult","heatStats","min","max","cropBox","paused","minFrame","rangeFrames","maxFrame","framePos","frameLogs","staticRenderFns","class","classNameForState","screeningResultClass","onReferenceDevice","style","background","warmupBackgroundColour","$event","interacted","ref","showCanvas","isWarmingUp","shouldLeaveFrame","temperature","screeningAdvice","domProps","messageText","isLocal","showSettings","hasSettings","cogIcon","closedAdminSettings","DEFAULT_THRESHOLD_MIN_FEVER","ThermalRefTemp","SnapshotTime","TemperatureCelsius","SnapshotValue","ThresholdMinFever","HeadBLX","HeadBLY","HeadBRX","HeadBRY","HeadTLX","HeadTLY","HeadTRX","HeadTRY","CalibrationBinaryVersion","UuidOfUpdater","UseNormalSound","UseWarningSound","UseErrorSound","ScreeningState","InitialFrameInfo","Camera","ResX","ResY","FPS","Brand","Model","Firmware","CameraSerial","Telemetry","FrameCount","TimeOn","FFCState","FrameMean","TempC","LastFFCTempC","LastFFCTime","AppVersion","BinaryVersion","Calibration","arrayBuffer","Blob","prototype","blob","Promise","resolve","reject","fileReader","FileReader","addEventListener","result","readAsArrayBuffer","DegreesCelsius","constructor","val","toString","toFixed","saveCurrentVersion","binaryVersion","window","localStorage","setItem","JSON","stringify","checkForSoftwareUpdates","shouldReloadIfChanged","prevVersionJSON","getItem","prevVersion","parse","console","log","location","reload","scopedSlots","_u","key","fn","tab","_l","item","proxy","close","content","tag","state","editedCropBox","thermalRef","geom","pendingCalibration","canCalibrate","stopPropagation","editCalibration","pencilIcon","showCalibrationDialog","snapshotScreeningEvent","editedCalibration","updateCalibration","incrementCalibration","plusIcon","minusIcon","acceptCalibration","toggleCustomTemperatureThresholds","useCustomTemperatureRange","persistSettings","editedTemperatureThreshold","selectedTemperatureRange","playNormalSound","playWarningSound","playErrorSound","saving","recording","canEditCropping","cropEnabled","gotCropChange","toggleCropping","cropIcon","coords","x","y","frameNum","startDrag","endDrag","VideoCropControls","currentTarget","boundDragHandle","boundEndDrag","created","bind","mounted","top","left","right","bottom","$refs","offset","beforeDestroy","removeEventListener","event","dragHandle","eventName","type","target","cropTopHandle","cropRightHandle","cropBottomHandle","cropLeftHandle","position","MouseEvent","touches","clientX","clientY","minDimensions","maxInsetPercentage","bounds","box","getBoundingClientRect","l","r","id","Math","height","width","$emit","$parent","required","component","VideoStream","mdi","container","scale","showCoords","onMouseMove","onFrameUpdate","updateOverlayCanvas","rect","floor","underlay","cameraStream","canvas","vizOverlay","canvasWidth","devicePixelRatio","canvasHeight","context","getContext","clearRect","save","scaleX","scaleY","fillStyle","beginPath","arc","center","radius","PI","fill","restore","drawOverlays","lineWidth","isValid","valid","headLock","strokeStyle","point","samplePoint","stroke","moveTo","head","bottomLeft","lineTo","topLeft","topRight","bottomRight","onePercentWidth","onePercentHeight","x0","x1","y0","y1","saveCropChanges","next","imgData","getImageData","frameData","Number","MAX_SAFE_INTEGER","data","Uint32Array","buffer","range","i","length","v","putImageData","onFaceChanged","onThermalReferenceChanged","onCropChanged","default","components","VBtn","API_BASE","DEVICE_ENDPOINT","deviceId","ExternalDeviceSettingsApi","request","fetch","method","headers","body","response","status","json","error","ScreeningApi","deviceSerial","feverMinThresholdAtRecordingTime","QRID","frameInfo","Channel","includes","CameraID","Type","Timestamp","timestamp","toISOString","replace","DisplayedTemperature","calculatedValue","FeverThreshold","Meta","Face","tL","tR","bL","bR","Sample","sampleX","sampleY","SampleRaw","round","rawTemperatureValue","RefTemp","thermalReference","temp","RefRaw","presignedUrl","text","calibrationChanged","thresholdChanged","calibration","calibrationPayload","CalibratedTemp","parseFloat","calibrationTemperature","MinFeverThreshold","thresholdMinFever","thermalRefTemperature","hotspotRawTemperatureValue","thermalReferenceRawValue","DeviceApi","recordUserActivity","disableRecordUserActivity","registerQRID","disable","stopRecording","enable","enableQRMode","setDeviceInfo","port","debugPrefix","url","Authorization","btoa","get","getJSON","SOFTWARE_VERSION","getText","START_RECORDING","download","DOWNLOAD_RECORDING","STOP_RECORDING","DEVICE_INFO","DEVICE_TIME","RECORDER_STATUS","DEVICE_CONFIG","put","RUN_FFC","NETWORK_INFO","formData","URLSearchParams","append","post","SAVE_CALIBRATION","LOAD_CALIBRATION","CalibrationSettings","deviceName","deviceID","piSerial","unedited","temperatureThreshold","sounds","warning","normal","edited","a","b","State","latestScreeningEvent","thermalRefTemp","thermalRefRaw","rawTempValue","Date","headBoundsChanged","newCalibration","uuid","getTime","saveCalibration","amount","isNaN","resetEdits","devicename","serial","deviceInfo","name","DeviceInfo","info","networkInfo","softwareVersion","Object","entries","cameraInfo","camera","IPAddress","Interfaces","filter","nic","IPAddresses","map","substring","indexOf","Online","Config","newLine","VCard","cameraAvailable","editedThermalRefMask","isRecording","onMaskChanged","toggleRecording","dataurl","document","createElement","href","setAttribute","click","DeveloperUtilities","enableQR","then","$root","$children","navigator","userAgent","processor","AdminSettings","tabItems","PROBABLE_ERROR_TEMP","thermalRefWidth","lerp","amt","closestY","prev","best","d","abs","sort","pop","find","interpolateShapes","rowNext","rowPrev","push","curveFitting","Sound","Audio","UserFacingScreening","didInteract","prevFrameTime","performance","now","stateQueue","setTimeout","beziers","aspectRatio","parentElement","ctx","lineCap","requestAnimationFrame","drawBezierOutline","message","isAfterFFCEvent","isAquiring","isTooFar","missingRef","logForTest","temperatureIsNormal","temperatureIsHigherThanNormal","MEASURED","onScreeningEventChange","src","play","temperatureIsProbablyAnError","screeningEvent","leftOffset","rightOffset","translate","shapes","interpolatedShape","LerpAmount","elapsedSincePrevFrame","pointsArray","Uint8Array","reverse","row","bezierPts","fitCurveThroughPoints","headWidth","distance","dX","dY","sqrt","strokeAlpha","setLineDash","lineDashOffset","bezierCurveTo","samplePointLerp","globalCompositeOperation","leftGradient","createLinearGradient","addColorStop","rightGradient","topGradient","bottomGradient","fillRect","insetY","insetX","len","sampleTemp","toLowerCase","TOO_FAR","WARMING_UP","hueStart","saturationStart","lightnessStart","hueEnd","saturationEnd","lightnessEnd","WARMUP_TIME_SECONDS","warmupSecondsRemaining","hue","saturation","lightness","AFTER_FFC_EVENT","LARGE_BODY","FACE_LOCK","HEAD_LOCK","FRONTAL_LOCK","BLURRED","STABLE_LOCK","MISSING_THERMAL_REF","secondsRemaining","minsRemaining","seconds","String","padStart","count","MULTIPLE_HEADS","READY","isTesting","LoggingInterface","onFrameChange","logContainer","innerText","currLogs","forEach","arg","CameraConnectionState","qrMessage","QRImage","Valid","Invalid","Unregistered","streamLoaded","stream","QRVideo","timeQRFound","qrScanner","undefined","videoStream","oncanplay","video","destroy","runScan","startScanning","start","stop","FrameHandler","secondsToMilliseconds","isDeviceRecording","startTimeInFrame","startTimeOutFrame","hasMeasured","timeInFrame","getTimeInFrame","hasExit","isInFrame","isObjectStillInFrame","measuredInFrame","shouldRecord","nextState","isObjectInFrame","hasObjectExitFrame","ThresholdSeconds","currTimeOutFrame","Infinity","totalTimeInFrame","App","isNotFullscreen","frameHandler","frameListener","Worker","URL","gotFirstFrame","cptvStartFrame","cptvEndFrame","qrCode","skippedWarmup","attemptingFFC","runningFFC","startLoad","frames","hostname","isRunningInAndroidWebview","requestFullscreen","code","isValidQR","slice","nextCalibration","firstLoad","telemetry","timeOnSecs","timeOnInSeconds","FFC_SAFETY_DURATION_SECONDS","lastFrameTime","cameraConnectionState","Connected","Connecting","updateBodyOutline","shape","freeze","checkForSoftwareUpdatesThisFrame","checkForCalibrationUpdatesThisFrame","prevCalibration","bodyShape","prevScreeningState","nextScreeningState","process","msSinceLastFFC","timeTillFFC","FFC_MAX_INTERVAL_MS","sampleValue","t","runFFC","qr","readyCount","checkCanFFC","setInterval","clearInterval","sample","onConnectionStateChange","connection","device","enableRecording","hasCamera","cptvFilename","uri","search","params","existingCalibration","newAppVersion","checkForSettingsChanges","network","Name","split","onmessage","frameMessage","payload","playLoadedCptv","terminate","onFrame","startCamInterval","isGettingFrames","postMessage","cptvFileToPlayback","ceil","incrementFramePos","VApp","icons","iconfont","Disconnected","INIT","currentScreeningStateFrameCount","thresholdSum","motionThresholdSum","threshold","halfwayRatio","hasBody","motionSum","frameBottomSum","ObservableDeviceApi","vuetify","h","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","c","deferred","O","chunkIds","priority","notFulfilled","fulfilled","j","keys","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","f","chunkId","all","reduce","promises","u","miniCssF","g","globalThis","Function","obj","prop","hasOwnProperty","call","inProgress","dataWebpackPrefix","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","timeout","nc","onScriptComplete","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","appendChild","Symbol","toStringTag","p","baseURI","self","installedChunks","installedChunkData","promise","Error","loadingEnded","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","wasmImportedFuncCache0","wasmImportedFuncCache1","wasmImportedFuncCache2","wasmImportedFuncCache3","wasmImportedFuncCache4","installedWasmModules","wasmImportObjects","p0f64","p0i32","p1i32","wasmModuleMap","w","wasm","wasmModules","wasmModuleId","idx","installedWasmModuleData","importObject","req","WebAssembly","compileStreaming","items","instantiate","instantiateStreaming","bytesPromise","bytes","res","instance","__webpack_exports__"],"sourceRoot":""}